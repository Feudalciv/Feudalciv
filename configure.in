dnl configure.in for freeciv
dnl Process this file with autoconf to produce a configure script.

dnl Initialize with some random file to ensure the source is here.
AC_INIT(common/game.c)
AM_INIT_AUTOMAKE(freeciv,1.7.1)

PACKAGE=freeciv
VERSION=1.7.1
AC_SUBST(PACKAGE)
AC_SUBST(VERSION)

dnl Evaluate options. Example:
dnl AC_ARG_ENABLE(debug,
dnl 	[  --enable-debug           include debugging code],
dnl 	AC_DEFINE(DEBUG)
dnl )

dnl Checks for programs.
AC_PROG_CC
AC_PROG_CPP
AC_PROG_RANLIB
AC_PROG_MAKE_SET
AC_ARG_PROGRAM

dnl Checks for libraries.
AC_PATH_XTRA
CFLAGS="$CFLAGS $X_CFLAGS"
LIBS="$LIBS $X_LIBS $X_PRE_LIBS $X_EXTRA_LIBS"

AC_CHECK_LIB(X11, XOpenDisplay, , AC_MSG_ERROR("Need X11"), $LIBS)
AC_CHECK_LIB(Xext, XShapeCombineMask)
AC_CHECK_LIB(ICE, main)
AC_CHECK_LIB(SM, main)
AC_CHECK_LIB(Xt, main, , ,$LIBS)
AC_CHECK_LIB(Xmu, main)
AC_CHECK_LIB(Xaw, main)
AC_CHECK_LIB(Xpm, XpmReadFileToPixmap, , AC_MSG_ERROR("Need xpm library"), $X_LIBS)
AC_CHECK_LIB(socket,main)
AC_CHECK_LIB(nsl,main)
AC_CHECK_LIB(nls,main)

dnl Checks for library functions.
AC_TYPE_SIGNAL
AC_FUNC_VPRINTF
AC_CHECK_FUNCS(gethostname select socket strerror)

dnl Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS(sys/time.h unistd.h)
AC_CHECK_HEADERS(X11/xpm.h)

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_HEADER_TIME

AC_OUTPUT(Makefile data/Makefile common/Makefile ai/Makefile client/Makefile server/Makefile)
