Thu Dec 10 10:16:34 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* ai/aicity.c: When AI stops building a wonder, use
 	E_WONDER_STOPPED to follow client message options.  Bug reported
 	by Andrew Schulman.  Likewise, when AI sells obsolete
 	improvements, use E_IMP_SOLD.
	
Thu Dec 10 09:54:49 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* AUTHORS, client/mapctrl.c, common/unit.c, common/unit.h,
 	server/unithand.c: Clean up what player gets told when a diplomat
 	or spy can't do an action due to lack of movement points.  There
 	used to be three possibilities:

	- The message "You can't attack there", if the city is occupied.

	- The message "Only ground troops can take over a city", if the
 	  city is empty and a random number goes in favor of allowing you
 	  to move.

	- Nothing at all, if the city is empty and the random number goes
 	  against letting you move.

	Now it always says: "You don't have enough movement left".  Also,
 	if spy/diplomat hasn't moved this turn, allow action, to allow
 	diplomats to act against cities in mountains.  Patch submitted by
 	Patrick Smith <patsmith@pobox.com>.
	
Thu Dec 10 09:19:22 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/settlers.c: Changed some cases of map.xsize to map.ysize.
  	Hopefully this completes fix to europe.sav segfault bug report by
 	Andrew Schulman.
	
Wed Dec  9 11:25:14 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/settlers.c: Fixed check to exclude y==game.mapsize when
 	choosing city sites.  Possible partial fix to europe.sav segfault
 	bug reported by Andrew Schulman.
	
Tue Dec  8 10:20:47 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* AUTHORS: Added/adjusted names of contributors.
	
Tue Dec  8 10:14:33 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* ai/advdomestic.c: Small optimization to calc of AI barracks
 	values, based on a patch by Tony Stuckey.
	
Thu Dec  3 11:33:57 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/gamehand.c: Adjust initial map knowledge depending on
 	game.civstyle.  Patch submitted by Anthony J. Stuckey
 	<stuckey@jaka.ece.uiuc.edu>.
	
Thu Dec  3 11:18:37 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* Imakefile: Fixed rule for client/Freeciv.h, to work with Solaris
 	make.  Patch submitted by Reinier Post.
	
Thu Dec  3 11:07:23 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* configure, configure.in: If we're using gcc, use -Wall, to
 	encourage patches which are -Wall clean.
	
Thu Dec  3 10:50:52 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* configure, configure.in: When configure fails due to not finding
 	X or Xpm, try to give some hints.
	
Wed Dec  2 10:17:16 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/city.c: Updated Greek city names, submitted by Rizos
 	Sakellariou <rizos@cs.rice.edu>.
	
Wed Dec  2 10:08:40 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* data/helpdata.txt: Minor help text fixes.
	
Wed Dec  2 10:01:03 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/city.c: Adjusted and additional Roman and German city
 	names.  Patches submitted by Massimo Campostrini and Peter
 	Schaefer.
	
Wed Dec  2 09:44:44 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* acinclude.m4, aclocal.m4, configure, configure.in: New macro
 	FC_XPM_PATHS to allow user to specify Xpm paths more easily, or
 	guess paths in /usr/local if the appropriate Xpm files are found
 	there.  Also renamed AC_EXPAND_DIR to FC_EXPAND_DIR.
	
Tue Dec  1 09:46:54 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* Makefile.in, config.h.in, configure, configure.in,
 	ai/Makefile.in, client/Makefile.in, common/Makefile.in,
 	data/Makefile.in, server/Makefile.am, server/Makefile.in: Fix to
 	not include -lnsl -lsocket twice on client link line (already once
 	in X_EXTRA_LIBS), but still include them (if required) for the
 	server, using new SERVER_LIBS.  Should also fix problems with
 	these libs on IRIX.  Don't check for socket func because of
 	resulting problems with LIBS.  Die with an error if can't find
 	X11/xpm.h include.
	
Sun Nov 29 07:05:09 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/finddlg.c, client/gotodlg.c, common/game.c,
 	common/game.h, server/citytools.c, server/civserver.c,
 	server/plrhand.c: Some minor fixes indicated by Solaris cc
 	warnings.  Removed some bad (void*) casts to the fourth (function)
 	arg of qsort; changed game.randseed to type int instead of
 	RANDOM_TYPE (= uint), so the (int*) in settings can point to it
 	properly, and because we can't store a non-int value in it anyway;
 	fixed some trivial cases of "statement not reached".
	
Sun Nov 29 04:23:17 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* configure, configure.in: Use X_CFLAGS to get appropriate -I when
 	checking for X11/xpm.h
	
Sat Nov 28 07:21:15 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* README.AI: Band-aid update to README.AI
	
Sat Nov 28 07:20:15 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/clinet.c, common/shared.c, common/shared.h,
 	server/sernet.c: New function mystrerror, to work around systems
 	where a real strerror function wasn't found by configure.
	
Fri Nov 27 12:02:00 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/map.h: Set default diplcost to 0.  Patch submitted by
 	Mirar <mirar@idonex.se>.
	
Fri Nov 27 11:32:43 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/helpdlg.h, client/menu.c, data/helpdata.txt: Added help
 	page for Zones of Control.
	
Fri Nov 27 11:18:44 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* acinclude.m4, aclocal.m4, configure: Fixed FC_CHECK_X_LIB to put
 	LIBS rightmost on trial linker line.  Patches submitted by Sverker
 	Wiberg and Greg Wooledge.
	
Fri Nov 27 11:15:58 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/Makefile.am, client/Makefile.in: Fixed client link line
 	to not include X_PRE_LIBS twice.  Patch submitted by Greg
 	Wooledge.
	
Fri Nov 27 11:12:52 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/repodlgs.c, common/city.c, common/city.h, common/game.c,
 	common/game.h: Fixed minor problem with the city report if any
 	cities have duplicate names or truncated names.  In the process
 	improved city report popup-time for large numbers of cities by
 	sorting on city pointers rather than city_id's.  Changed
 	city_name_compare() to operate on city pointers rather than
 	city_id's, and moved from game.c to city.c.  Changed city report
 	to indicate truncated names with a "." at the end.
	
Thu Nov 26 10:45:44 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/city.c: An additional city name pool for use by races
 	which run out of city names.  Names are small town names from the
 	GPL'd game xconq.  Patch submitted by Massimo Campostrini
 	<campo@mailbox.difi.unipi.it>.
	
Thu Nov 26 10:43:37 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/xmain.c: Initialize the random number generator in the
 	client, for city name suggestions.
	
Thu Nov 26 10:35:50 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/Freeciv.h, client/repodlgs.c, data/Freeciv: Allow city
 	names up to length 31 (ie MAX_LENGTH_NAME-1) when naming or
 	renaming a city.  In the city report abbreviate names longer than
 	15 characters.
	
Thu Nov 26 07:18:55 1998  Lalo Martins <lalo@debian.org>:

	* debian/rules: changed CREDITS for AUTHORS in debian/rules
	
Thu Nov 26 07:01:27 1998  Lalo Martins <lalo@debian.org>:

	* debian/changelog, debian/civ, debian/civ.man,
 	debian/civclient.6, debian/civserver.6, debian/control,
 	debian/copyright, debian/menu, debian/rules: updating the debian/
 	directory
	
Thu Nov 26 06:45:07 1998  Lalo Martins <lalo@debian.org>:

	* build.debian: script to automatically build Debian packages of
 	CVS snapshots, directly from the local CVS tree
	
Wed Nov 25 11:51:45 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/game.c, common/game.h, server/civserver.c,
 	server/gamehand.c, server/plrhand.c, server/stdinhand.c,
 	server/stdinhand.h: Removed "default" skill level.  Instead set
 	and display skill levels explicitly.  Changed default skill level
 	to "easy".  Set skill level explicitly for aifill players and when
 	a human player is toggled to ai control.  New function
 	set_ai_level_direct().
	
Wed Nov 25 11:38:11 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/player.c, common/player.h, server/plrhand.c,
 	server/settlers.c, server/stdinhand.c: Implemented
 	player.ai.expand to make easy mode AI less expansionistic.
	
Wed Nov 25 11:26:11 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* ai/advmilitary.c, ai/aicity.c, ai/aihand.c, ai/aiunit.c,
 	server/settlers.c: Modified some AI decisions to be fuzzy.
	
Wed Nov 25 11:19:46 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/player.c, common/player.h, server/plrhand.c,
 	server/stdinhand.c: Framework for fuzzy AI decisions for easy AI
 	mode.
	
Wed Nov 25 07:17:38 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/helpdlg.c, client/optiondlg.c: Fudged empty switch/goto
 	labels, to placate Solaris cc/xmkmf/makedepend.  Based on
 	information from Reinier Post.
	
Wed Nov 25 07:08:58 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/packhand.c: In handle_unit_info(), for a new unit,
 	initialize unit unhappiness, upkeep, fuel, and ai.control, based
 	on packet rather than to zero.  Fuel part fixes a bug with display
 	of bomber moves left, reported by Andrew Schulman; upkeep and
 	unhappiness parts fix bug where the unit upkeep and unhappy icons
 	in the city report were not shown initially when a player
 	reconnects.
	
Wed Nov 25 07:04:05 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/helpdlg.c: Fixed help on wonders; was accidently showing
 	improvement style information, with upkeep instead of obsolete-by.
  	Bug reported by Massimo Campostrini.
	
Sun Nov 22 06:04:56 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* Imakefile: Fixed position of client/Freeciv.h rule, thanks to
 	Reinier Post.  Also changed the rule to add the comments at the
 	top of Freeciv.h
	
Sat Nov 21 08:04:53 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* configure, configure.in: Changed to avoid using "test -z" (for
 	testing Xaw3d) since caused problems on Solaris.
	
Sat Nov 21 07:45:08 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* config.h.in, configure: Autogenerated file updates.
	
Sat Nov 21 07:42:58 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* configure.in: Don't do the X-related configure tests if
 	--disable-client, to allow building the server on a machine
 	without X.  From a patch by Sverker Wiberg.
	
Sat Nov 21 07:41:46 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* configure.in: Minor corrections to VERSION and PACKAGE defines
 	pointed out by Per Mathisen.  This change makes VERSION and
 	VERSION_STRING in config.h identical, but it seems easiest to
 	leave them both there.
	
Sat Nov 21 07:40:46 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* acconfig.h, configure.in, client/pixcomm.c, client/pixcommp.h:
 	Allow using of Xaw3d via a configure option, --with-xaw3d.  Thanks
 	to xaw3d patch by Trent, and configure patch by Markus Linnala.
	
Fri Nov 20 23:48:02 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/registry.c: Minor extensions to registry format to allow
 	future use with client options file: allow '#' as a comment
 	character, and allow space before equals sign.
	
Fri Nov 20 23:45:22 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/optiondlg.c: Added a currently unused line to the client
 	options files, so that in the future we should be able to
 	transparently change to using registry functions to parse this
 	file.
	
Fri Nov 20 23:42:36 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/climisc.c, client/graphics.c, client/graphics.h,
 	common/shared.h: Moved "vers" define from graphics.h to shared.h
 	(in future to config.h?) and renamed to WORD_VERSION; allows
 	removing includes for config.h and shared.h in graphics.h
	
Fri Nov 20 23:24:04 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/maphand.c: Swamps caused by global warming no longer
 	retain irrigation.
	
Wed Nov 18 12:10:32 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* acconfig.h, acinclude.m4, aclocal.m4, config.h.in, configure,
 	configure.in: Put configured FREECIV_DATADIR into config.h, for
 	even tidier compile lines.
	
Wed Nov 18 11:10:35 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/cityturn.c: More minor fixes to foodstock with a granary,
 	re citysize and odd values of game.foodbox, this time for famine
 	situations.
	
Tue Nov 17 09:41:41 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/cityturn.c: Improvements to code and for odd foodbox, in
 	city_increase_size(), suggested by Tony Stuckey.
	
Tue Nov 17 09:19:12 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/gotohand.c: Made the warstack queue into a circular
 	queue, to fix a bug where we could write past the end of warstack
 	for large maps.  Fixes a segfault bug reported by Andrew Schulman.
	
Tue Nov 17 08:01:38 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/repodlgs.c: Made some columns in the city report right
 	justified and some left justified.
	
Tue Nov 17 07:59:24 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/plrhand.c, server/stdinhand.c: Formatted the titles of
 	some reports better.
	
Mon Nov 16 11:02:54 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/connectdlg.c: Fixed a bug where the metaserver dialog
 	sometimes became unavailable.  Bug reported by Nicolas Brunel
 	<brunel@ham.esil.univ-mrs.fr>.
	
Mon Nov 16 10:35:35 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/civserver.c: Fixed bug where huts reappeared when
 	reloading a savegame based on a scenario.  Bug reported by Andrew
 	Schulman <andrex@alw.nih.gov>.
	
Sun Nov 15 08:41:15 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/optiondlg.c: Avoid using snprintf (non-standard).
	
Sun Nov 15 08:04:54 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/shared.h: Conditionally put VERSION defines back in
 	shared.h (for now?) so Imakefile and Makefile.noimake can work.
	
Sun Nov 15 03:15:21 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* stamp-h.in: Put stamp-h.in in cvs again.
	
Sun Nov 15 01:53:21 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* Makefile.in, aclocal.m4, config.h.in, configure, ai/Makefile.in,
 	client/Makefile.in, common/Makefile.in, data/Makefile.in,
 	server/Makefile.in: Autogenerated files from previous batch of
 	changes: aclocal ; autoheader ; automake ; autoconf
	
Sun Nov 15 01:49:43 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* Makefile.am, configure.in: Configure options `--disable-client'
 	and `--disable-server', to only build the server or client
 	respectively.  The default is to build both.  From a patch
 	submitted by Sverker Wiberg <sverkerw@Update.UU.SE>.
	(But note: I believe configure still checks (and insists on) the X
 	libs even if disable-client; needs to be fixed. --dwp)
	
Sun Nov 15 01:48:52 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* configure.in, client/Makefile.am: Link only the civclient
 	against X11 libs.  From a patch by Markus Linnala.
	
Sun Nov 15 01:48:08 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* Makefile.am, acconfig.h, acinclude.m4, configure.in: Attempt at
 	improving detection of X11 libraries.  Based on patches by Markus
 	Linnala and Greg Wooledge.
	
Sun Nov 15 01:46:56 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* Makefile.am, acconfig.h, configure.in, common/shared.h: Use
 	config.h and -DHAVE_CONFIG_H instead of very long compile lines.
  	From a patch by Markus Linnala; also thanks to Per Mathisen.
	
Sun Nov 15 01:45:45 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* configure.in: Relatively simple and self-contained configure.in
 	changes, based on a patch submitted by Markus Linnala
 	<maage@cs.tut.fi>.
	
	Setup all version defines fully in configure.in
	
	Added AM_MAINTAINER_MODE; use configure option
 	--enable-maintainer-mode to enable make rules and dependencies not
 	useful (and sometimes confusing) to the casual installer.  (Note
 	this doesn't do what I thought; it determines whether aclocal etc
 	are rerun by make -- it doesn't affect source compilation
 	dependencies. -- dwp)
	
	Configure debugging options: --enable-debug=[no/minimum/yes]
 	--enable-debug=no defines NDEBUG, so asserts aren't included at
 	binary. --enable-debug=yes defines DEBUG. It does not have any
 	effect now, but maybe it is needed. --enable-debug=minimum does
 	not define anything (this is the default).  (Removed old debug
 	example.)
	
	Added program checks for AWK, LN_S (from autoscan); commented out
 	AC_PROG_MAKE_SET already done by AM_INIT_AUTOMAKE.
	
	Moved checks for library functions down (per autoconf docs).
	
	Combined AC_CHECK_HEADERS lines, and added sys/ioctl.h (from
 	autoscan).
	
	Added AC_STRUCT_TM (from autoscan).
	
	Added strstr to AC_CHECK_FUNCS, and comment re gettimeofday (from
 	autoscan).
	
Sun Nov 15 01:44:11 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/clinet.c, client/connectdlg.c, client/graphics.c,
 	client/graphics.h, client/helpdlg.c, client/optiondlg.c,
 	client/xmain.c, common/shared.h, server/civserver.c,
 	server/gamehand.c, server/meta.h: Conditionally included config.h
 	for those files which will need it (at this stage only files which
 	use VERSION defines, since other configure defines are not used).
  	From a patch by Markus Linnala.
	
Sun Nov 15 01:42:38 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* ai/Makefile.am, client/Makefile.am, server/Makefile.am: Removed
 	space between -I and its argument, and other minor formating.
  	From a patch my Markus Linnala.
	
Sat Nov 14 06:23:41 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/capability.c: Use mystrdup instead of strdup.
	
Sat Nov 14 00:55:38 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/Makefile.am, client/Makefile.in: Fix to allow building
 	freeciv in another tree than the sourcetree.  Patch submitted by
 	Mirar <mirar@idonex.se>.
	
Sat Nov 14 00:52:51 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* data/Makefile.am, data/Makefile.in: Added scenario savegames to
 	pkgdata_DATA so they get included in distribution.
	
Sat Nov 14 00:49:59 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/menu.c, client/messagedlg.c, client/messagedlg.h,
 	client/optiondlg.c, client/optiondlg.h, client/repodlgs.c,
 	client/repodlgs.h, client/xmain.c: Added ability to save and
 	reload client "settings", that is: options, message options, and
 	city report configuration.  The settings file is
 	$HOME/.civclientrc, or instead $FREECIV_OPT if that environment
 	variable is set.  Settings are loaded at startup if the file
 	exists, and saved from a game menu option.  Based on a patch
 	submitted by Massimo Campostrini <campo@mailbox.difi.unipi.it>.
	
Sat Nov 14 00:10:10 1998  Mitch Davis <mjd@alphalink.com.au>:

	* AUTHORS, Makefile.am, Makefile.in: Moved the contents of CREDITS
 	to AUTHORS, as the Makefile that configure generates looks for
 	AUTHORS, not CREDITS.  I've been meaning to do this for a long
 	time.
	
Sat Nov 14 00:02:57 1998  Mitch Davis <mjd@alphalink.com.au>:

	* Imakefile: This patch recreates client/Freeciv.h from
 	data/Freeciv.  Patch submitted by Reinier Post <rp@win.tue.nl>.
	
Thu Nov 12 08:33:47 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* configure, configure.in, client/Makefile.in: Set
 	-DFREECIV_DATADIR to pkgdatadir without modifying
 	client/Makefile.in directly.  Patch submitted by Mirar
 	<mirar@idonex.se>.
	
Thu Nov 12 07:57:22 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/messagedlg.c, common/events.h, server/cityturn.c,
 	server/unitfunc.c, server/unithand.c: Fixed some annoyances with
 	the messages window: Added some new event types:
 	E_CITY_AQ_BUILDING for when a city needs an aqueduct/sewer and is
 	already building one (inspired by a patch by Michael Bickel);
 	E_UNIT_LOST_ATT and E_UNIT_WIN_ATT to be able to differentiate in
 	message options between combat results from defenders (initiated
 	by others) and attackers (initiated by self); similarly
 	E_MY_DIPLOMAT for diplomatic actions initiated by self (as opposed
 	to existing E_DIPLOMATED for those initiated by others).  Also
 	default some event messages as "output window only".
	
Thu Nov 12 07:27:15 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/messagewin.c: Fixed meswin_allocate() to add an extra
 	space for the string_ptrs sentinel.
	
Thu Nov 12 07:09:55 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/city.c: Fixed could_build_improvement() so wonders can be
 	built even when obsolete.
	
Tue Nov 10 10:44:36 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/Freeciv.h, client/civclient.c, client/menu.c,
 	client/messagedlg.c, client/messagedlg.h, client/messagewin.c,
 	client/packhand.c, common/events.h, data/Freeciv: Combined the
 	message options and message filter dialogs into a single dialog,
 	and allow requesting individual popups for any event type, not
 	just the three in the previous "Message options".  Also, you can
 	now specify independently whether event messages go to the output
 	window and/or the messages window.  Also, the message labels in
 	the dialog are sorted alphabetically.
	
Tue Nov 10 10:34:50 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/chatline.c, client/chatline.h, client/climisc.c,
 	client/climisc.h, client/menu.c: Added menu option to clear the
 	output window.  Also decided to put all output window functions
 	into chatline.c, with append_output_window
	(that is, moved log_output_window there from climisc.c).
	
Mon Nov  9 11:15:04 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/unit.c, server/citytools.c, server/unitfunc.c,
 	server/unitfunc.h, server/unithand.c, server/unittools.c:
 	Diplomat/Spy fixes from Kris Bubendorfer
 	<Kris.Bubendorfer@MCS.VUW.AC.NZ>.
	
	1.  You now no longer get the the spy/diplomat menus if you have
 	insufficient moves to complete.
	
	2.  When you bribe a unit you no longer get all the hit points
 	back.  Therefore bribing a damaged unit will result in you getting
 	a unit with the same damage.  This also applies when you bribe a
 	city - all units inside retain their original hit points.
	
	3.  As per an earlier consensus on the list, damaged units cost
 	less to bribe by the following formula:

	        cost = original_cost/2 + (original_cost/2 * hp_left/hp)

	Therefore a unit with just 1 hp left will cost just over half the
 	undamaged cost.
	
Sun Nov  8 00:32:52 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/civserver.c: Fix per-connection capabilities: in the
 	server the client cap string was never copied into the connection
 	struct!  Also use our_capability instead of raw CAPABILITY in
 	accept_new_player.
	
Sat Nov  7 02:55:28 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/city.c, data/helpdata.txt: Changed possible locations
 	where Hydro Plant (and Hoover Dam) can be built to match Civ1 (was
 	next to Ocean/River, now Mountain/River).
	
Sat Nov  7 02:35:28 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/map.h: Increased maximum value of the researchspeed
 	server option from 20 to 100.
	
Sat Nov  7 02:23:58 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* README.AI, server/stdinhand.c: Made the default AI skill level
 	correspond to "normal".
	
Thu Nov  5 07:46:53 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/civclient.c, client/clinet.c, client/clinet.h,
 	client/packhand.c, client/xmain.c, common/packets.c,
 	common/packets.h, common/shared.h, server/civserver.c: Implemented
 	per-connection capabilities.  Replaced c_capability and
 	s_capability with our_capability, and added capability string to
 	connection struct.  See comments in common/shared.h
	
Thu Nov  5 07:29:06 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* ai/aicity.c, common/unit.c, common/unit.h, server/citytools.c,
 	server/unitfunc.c, server/unitfunc.h, server/unithand.c,
 	server/unithand.h: New function
 	transporter_min_cargo_to_unitlist(), for when a boat is disbanded
 	etc and there are other boats on the square.  New functions
 	wipe_unit_safe() and handle_unit_disband_safe() which take an
 	iterator argument and iterate past wiped units to avoid dangling
 	pointers and segfaults.  Unlink passenger genlist in wipe_unit
 	(wipe_unit_safe) to free genlist memory.
	
Thu Nov  5 07:06:59 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/messagedlg.c: Fixed some spelling in message_text[].
	
Thu Nov  5 07:00:43 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/Freeciv.h, client/repodlgs.c, data/Freeciv: Configurable
 	city report: can choose which columns are displayed, and extra
 	columns are now available.  Default setup is similar to before,
 	with some formating changes.  Available new columns are: more
 	concise rapture/disorder display; specialists; number of trade
 	routes; pollution.  It should be easy to add additional columns.
	
Thu Nov  5 06:16:51 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/cityhand.c: Bounds check argument of find_city_by_id, to
 	avoid possible segfault when it is called with unit.ai.charge
 	which may refer to a unit id.
	
Sat Oct 31 10:31:00 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/unittools.c: Fixed probable problems with
 	find_a_unit_type() (function to pick a unit_type found in hut).
  	Previous version had an off-by-one error and assumed Chivalry was
 	always found before Gunpowder.

Sat Oct 31 10:22:24 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/map.c, common/map.h, server/mapgen.c: Moved
 	add_specials() from common/map.c to server/mapgen.c where it
 	belongs.
	
Sat Oct 31 10:09:45 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/gamehand.c, server/plrhand.c: Removed tag "scorelog" from
 	the savefile_options string, and use secfile_lookup_int_default()
 	instead, since its not worth cluttering up savefile_options for a
 	single entry.
	
Thu Oct 29 09:34:31 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/game.c, common/game.h, common/map.h, common/shared.c,
 	common/shared.h, server/civserver.c, server/gamehand.c,
 	server/mapgen.c, server/plrhand.c, server/stdinhand.c:
 	Deterministic platform-independent pseudo-random number generator,
 	from patch submitted by Cedric Tefft <cedric@earthling.net>.
	
	Also added "to_client" field to settings (server options), to
 	avoid sending the random seeds (and also saveturns and scorelog)
 	when the client requests "report server options" (--dwp).
	
	Notes from Cedric:
	
	1) Although the PRNG seed is an unsigned 32-bit int, neither the
 	game file nor the server options know how to deal with any numbers
 	other than signed integers (no longs, no unsigned ints, etc.), so
 	in a few places I've had to strip the high bit off of the seed in
 	order to ensure consistency across platforms.
	
	2) The maximum value for the map seed is now limited to the
 	maximum value for the random number generator seed instead of
 	50000 (which I suspect was chosen somewhat arbitrarily anyway).
	
	3) I modified the map generator a tiny bit so that the map seed
 	variable takes on the value actually used to generate the map
 	(assuming it was zero to begin with).  Previously, a "random" map
 	seed was used to generate a new map, but this value was never
 	stored anywhere, so there was no reliable way to reproduce any
 	randomly generated map.
	
	4) If anybody has questions about the algorithm, please see the
 	code.  Believe it or not, I've actually included a relevant
 	comment or two. ;->
	
Tue Oct 27 13:50:47 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityhand.c, server/cityturn.c, server/unitfunc.c,
 	server/unithand.c, common/events.h, client/messagedlg.c: Added
 	some new event types for messages that previously used E_NOEVENT.
  	Reworded a lot of the diplomat/spy messages for grammer.
	
Tue Oct 27 12:10:52 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/gamehand.c: Cosmetic fix: don't save junk values for
 	ord_city for unsupported units.
	
Tue Oct 27 12:03:20 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/civserver.c: Fixed behaviour when server option
 	saveturns=0 (should mean never auto-save).  Bug reported by Ben
 	Korvemaker <benjamin@cs.ualberta.ca>.
	
Sun Oct 25 05:24:50 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* ai/advdomestic.c, common/game.c, common/game.h,
 	server/citytools.c, server/cityturn.c: Added game.aqueduct_size
 	and game.sewer_size (max size of a city without Aqueduct/Sewer) to
 	be configurable etc in the future (via rulesets).
	
Sun Oct 25 05:08:21 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* ai/advdomestic.c, ai/advmilitary.c, ai/aicity.c, ai/aihand.c,
 	ai/aiunit.c, common/city.c, common/city.h, server/citytools.c,
 	server/cityturn.c, server/settlers.c: Add and use new function
 	city_got_effect(), which is whether a city has an improvement or
 	the same effect via a wonder.  (Uses wonder_replacement().)
	
Sun Oct 25 04:38:30 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/messagewin.c, client/meswindlg.h, client/packhand.c:
 	Buffer the messages window for "end-of-turn" messages, similar to
 	city report buffering.
	
Sun Oct 25 04:35:21 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/Freeciv.h, client/messagewin.c, data/Freeciv: Removed the
 	limit (previously 32 lines) in the messages window, and made the
 	messages window scrollable.  When the window has enough messages
 	to be scrolling and new messages arrive, the window scrolls down
 	to the bottom so the new messages are noticed.
	
Sun Oct 25 04:07:59 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/player.h, server/civserver.c, server/plrhand.c,
 	server/stdinhand.c: Save and reload individual AI skill levels.
  	Also, show the skill level of each AI player in the server player
 	listing.  Do the right thing if server commands "hard" etc are
 	used with a name which doesn't match any player.
	
Sun Oct 25 03:32:34 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/repodlgs.c: Increased the number of columns in the
 	science report by 1 when the number of known techs is large (>60).
	
Sun Oct 25 03:28:49 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* data/helpdata.txt: Adjusted help text for Controls, giving more
 	space to keyboard controls, and expanded some of the keyboard
 	control explanations.  Added auto-e(x)plore.
	
Sun Oct 25 03:23:20 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/mapgen.c: Changed some intermediate floating point
 	calculations to pure integer calcs to reduce machine-dependence.
	
Sat Oct 24 15:46:08 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/tiles.xpm: One of the food numbers (the '0') was white
 	instead of yellow.  Also moved the auto-explore 'X' to the
 	lower-left corner, like the auto-settler 'A'.
	
Sat Oct 24 13:43:34 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/xmain.c: Changed graphics exposures to off in the
 	civclient GCs.  This _greatly_ reduces the number of events the X
 	server generates.  This fixes a problem where client memory usage
 	would swell as the XLib event queue would fill with tens of
 	thousands of graphics exposure events.
	
Sat Oct 24 13:24:27 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/packhand.c: The wakeup patch from a while back messed
 	something up.  Units stopped getting repainted when they changed
 	status.  For instance, if a unit left GOTO state, the "G" wouldn't
 	go away until the unit started to flash.
	
Fri Oct 23 08:33:19 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/citytools.c: Rewrote the function transfer_city_units().
  	Originally to remove calls to game_find_city_by_coor(), but it was
 	inefficient and looped over more units that it needed to.  Also
 	took out an ugly printf() call.
	
Fri Oct 23 08:29:56 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unitfunc.c: Replaced game_find_city_by_coor() with
 	map_get_city().
	
Fri Oct 23 08:28:42 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/game.c, common/game.h: Removed the function
 	game_find_city_by_coor().  It was only used five times, and is
 	exactly the same as map_get_city() which is used 95 times.
	
Fri Oct 23 08:27:49 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/city.c: ifdef'd out the unused function
 	city_list_find_coor()
	
Fri Oct 23 08:26:34 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/citydlg.c, client/mapctrl.c: Replaced
 	game_find_city_by_coor() with the indentical map_get_city().
	
Thu Oct 22 18:00:57 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityturn.c, server/cityturn.h: Took out the
 	set_worker_city() function to move into common.
	
Thu Oct 22 17:58:44 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/citytools.c: Update to refect change of worked from
 	player number to city pointer.  ifdef'd out some old code that
 	wasn't used.
	
Thu Oct 22 17:54:27 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityhand.c: Moved a few things to/from remove_city() and
 	game_remove_city().
	
Thu Oct 22 17:43:11 1998  Trent Piepho <xyzzy@u.washington.edu>

	* ai/aicity.c: Since worked is now a city pointer instead of a
 	player number, some code could be made more efficient.
	
Thu Oct 22 17:41:51 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/map.c, common/map.h: Changed the worked member of the
 	tile structure to a pointer to the city using the tile instead of
 	the player number.  Knowing what city is using a tile is more
 	usefull than knowing what player is using it, and pcity->owner
 	easily gives the player number.
	
Thu Oct 22 17:38:16 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/game.c, common/game.h: Changed game_remove_city to use a
 	city pointer instead of a city ID.  Put the code from the server's
 	remove_city() that remove the workers into game_remove_city().
  	Took the dealloc_id() call out of g_r_c and put it into the
 	server.
	
Thu Oct 22 17:34:28 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/city.c, common/city.h: Moved in the set_worker_city()
 	function from the server code.  Added two new functions
 	map_to_city_[xy](pcity,x y) which convert game map coordinates
 	into the city map coordinates.
	
Thu Oct 22 17:31:36 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/climisc.c: Reflected change of game_remove_city from
 	taking a city id to a city pointer as an argument.
	
Thu Oct 22 17:29:37 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/mapctrl.c: Made the show workers key on the map show the
 	city which is using the tile under the mouse instead of just the
 	city under the mouse.
	
Thu Oct 22 17:22:35 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/packhand.c: Instead of modifying the city map directly,
 	use the set_worker_city function like the server.
	
Wed Oct 21 13:09:00 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/game.c, common/game.h, common/map.h, server/cityturn.c,
 	server/gamehand.c, server/stdinhand.c: Added server option
 	aqueductloss; determines percentage of food lost when a city wants
 	to grow but needs an aqueduct(/sewer).  Default is 0.  Loss is
 	halved if city has a granary.  Mostly from a patch submitted by
 	Mark Brown <broonie@tardis.ed.ac.uk>
	
Tue Oct 20 17:40:49 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/civserver.c: Made global warming messages use the
 	E_WARMING event.
	
Tue Oct 20 17:24:46 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h, client/menu.c,
 	client/messagedlg.c, client/messagedlg.h, client/packhand.c: Added
 	a new menu item to the Game menu, Msg Filter.  This lets you
 	filter out types of messages you aren't interesed in.  Added the
 	new dialog for it to messagedlg.c, and put the message filtering
 	code in packhand.c.
	
Tue Oct 20 15:11:30 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityturn.c: Server sends a message when a city grows.
  	Patch from Massimo Campostrini, with some small changes by me.
	
Tue Oct 20 12:53:12 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/stdinhand.c: Added "static char horiz_line[]" to make the
 	code tidier (IMO).
	
Tue Oct 20 12:48:56 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* data/europe.sav: Commented out entries which don't get used
 	(revealed by section_file_check_unused()).
	
Tue Oct 20 12:47:28 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/civserver.c: Added call to section_file_check_unused();
 	adjusted calls (was two, now one) to section_file_free() after
 	load.
	
Tue Oct 20 12:44:12 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/helpdlg.c, data/helpdata.txt: Modified help system for
 	new unit flags.
	
Tue Oct 20 12:32:46 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* ai/advmilitary.c, ai/aiunit.c, client/dialogs.c,
 	client/mapctrl.c, common/city.c, common/unit.c, common/unit.h,
 	server/gotohand.c, server/unitfunc.c, server/unithand.c: Added
 	three new unit flags F_TRIREME, F_NUCLEAR and F_SPY, and modified
 	relevant code to use these flags instead of checking the
 	enumerated unit type against U_TRIREME, U_NUCLEAR, U_SPY.
	(This is so that all unit special effects are handled with unit
 	flags.)
	
Mon Oct 19 09:10:24 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/helpdata.txt: Added a bit about the "t" command.
	
Mon Oct 19 09:06:38 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h, client/mapctrl.c,
 	client/mapctrl.h, client/xmain.c: Adds a new command the the map.
  	Push "t" with the mouse on a city to see what tiles the city is
 	using.
	
Sun Oct 18 04:12:43 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* data/helpdata.txt: "Controls" help text: fixed an over-long
 	line; added "arrow keys: Move unit".
	
Sun Oct 18 03:11:18 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/gamehand.c, server/maphand.c: Include all of the server
 	options in the savefile, even those which only have effect at the
 	start of the game.  So now the server options always show the
 	values which were actually used.  Now always save map.xsize and
 	map.ysize as "map.width" and "map.height" (they used to be saved
 	as xsize and ysize when PRE_GAME_STATE).  Save and reload
 	game.diplchance.  Don't call map_init() in map_load (unnecessary
 	and over-writes reloaded values).  Simplify code used to load:
 	version, tmp_server_state, metaserver_info_line.
	
Sun Oct 18 02:59:48 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* ai/aiunit.c, common/city.c, common/game.c, common/player.c,
 	common/player.h, common/unit.c, server/plrhand.c,
 	server/unitfunc.c: New function player_find_city_by_id(pplayer,
 	city_id) which uses the best method depending on global variable
 	is_server.  New function player_owns_active_wonder(pplayer,
 	improvement_id).
	
Sun Oct 18 02:43:15 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* data/helpdata.txt: Help text changes: Airport: reduced vertical
 	space; Nuclear unit: added note about Manhattan Project; Combat:
 	clarified firepower of defending ships.
	
Sun Oct 18 02:40:58 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* data/earth-80x50.sav: Fixed English start position so they don't
 	start on an ocean square.  Patch submitted by Daniel Gudlat
 	<gudlat@informatik.hu-berlin.de>.
	
Sat Oct 17 12:04:27 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/connectdlg.c: Metaserver window doesn't appear if the
 	metaserver couldn't be contacted.  When it does appear, it's
 	positioned better on the screen.  Also, causing a second (and
 	third..) metaserver window to appear by clicking on the metaserver
 	button again is fixed.
	
Sat Oct 17 02:10:59 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/registry.c, server/registry.h: Extended the "registry"
 	format to include "vectors" and "tables", and documented the
 	previous and extended formats.  Use tabular format to reduce size
 	of city and unit sections in savegames: total savegame size can be
 	reduced by up to factors of a few for large games.  Include code
 	to track how many times values in the registry are looked up, for
 	example to help notice save/reload mismatch.  But
 	section_file_check_unused() is not yet called anywhere.
	
Sat Oct 17 01:51:26 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* server/stdinhand.c: Two changes to server command parsing: Don't
 	strip non-alpha-numeric characters from the start of command
 	argument.  This allows saving to files which start with "/", "..",
 	etc.  Patch submitted by Michael Bickel
 	<Michael.Bickel@informatik.uni-erlangen.de>.  Lines where the
 	first non-whitespace character is "#" are treated as comment
 	lines.  This allows comments in files which are read in with the
 	"-r" command-line flag.
	
Sat Oct 17 00:20:26 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/helpdlg.c: Avoid calling is_wonder() with B_LAST.
	
Fri Oct 16 13:22:11 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/civclient.c, client/helpdlg.c, client/packhand.c,
 	common/game.c, data/helpdata.txt: Improved the internals of the
 	help system to ensure (now and in the future) better consistency
 	on what units, techs, etc, are shown.  There are now well defined
 	sections in helpdata.txt for the following categories: unit types,
 	techs, improvements, wonders.  Within each category, say units, a
 	help node which doesn't match any actual unit (in terms of
 	unit_type_exists(), ie, implemented units), is omitted.  Any
 	actual unit missing in the helpdata.txt has a help node
 	automatically generated (as if there was an empty entry in
 	helpdata.txt).  Finally each category list is automatically sorted
 	alphabetically.
	
	I moved the "boottime" stuff in client/packhand.c:
 	handle_game_info() into client/civclient.c:set_client_state(),
 	because I think thats more correct in the case that a client
 	disconnects and then reconnects without quiting.  Also now the
 	help system is rebootable, because it depends (in principle, if
 	not in practice) on set_civ_style(), and in future will depend on
 	rulesets, which could change if you quit and then reconnect to a
 	different game.
	
	I removed the "indent" field of the struct help_item, because it
 	wasn't actually used.  I changed to help nodes data to use a
 	genlist rather than having its own implementation of a singlely
 	linked list.  (Mainly I wanted to be able to use genlist_sort().)
	
	In helpdata.txt I changed the "@" tags (which I had introduced in
 	a previous enhancement) to @START_UNITS, @END_UNITS etc to reflect
 	the new "category sections".
	
	With the new auto-generation of help nodes, any nodes with blank
 	text in helpdata.txt could in principle be removed.  I initially
 	did that, but then decided to leave them in, so that its easy to
 	add any extra text for any given node.
	
Fri Oct 16 13:06:42 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/city.c, common/city.h, common/tech.c, common/tech.h,
 	common/unit.c, common/unit.h: New convenience functions
 	find_tech_by_name(), find_improvement_by_name(), and
 	find_unit_type_by_name().  Just linear search the data arrays to
 	match a given name.  Not used yet, but will be soon.
	
Fri Oct 16 12:49:50 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* common/city.c, common/city.h, common/tech.c, common/tech.h,
 	common/unit.c, common/unit.h: New functions unit_type_exists(),
 	tech_exists(), and improvement_exists().  They do bounds checking,
 	and then check whether the specified element has been marked as
 	"removed", eg in the data tables or by set_civ_style().  Replaced
 	some existing bounds-check code by calls to these functions.
	
Fri Oct 16 12:22:10 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/inteldlg.c: Fixed bug where if a player is up to Future
 	Tech, that player's intelligence report regarding other players
 	would show them all as researching Future Tech even when they are
 	not.  Bug report and fix submitted by Massimo Campostrini
 	<campo@mailbox.difi.unipi.it>.
	
Fri Oct 16 12:00:43 1998  David Pfitzner <dwp@mso.anu.edu.au>:

	* client/Freeciv.h, client/civclient.c, client/messagewin.c,
 	data/Freeciv: Added a "Popup City" button to the messages window.
  	Related fix-ups: Removed some unused file-level variables in
 	messagewin.c Renamed misnamed variable and function relating to
 	the "Goto Location" messages button.  Deactivate the goto/popup
 	buttons when messages are cleared.  Clear the messages when
 	connection is terminated or lost (so if the client reconnects to a
 	different game, the messages from the previous game are not still
 	there).
	
Fri Oct  9 07:44:10 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/citytools.c, server/citytools.h, common/city.c,
 	common/city.h: Moved two functions from the server to common, so
 	the client can use them.
	
Thu Oct  8 23:46:05 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/xmain.c: This patch avoids a "convert int to ptr" warning
 	on an Alpha running Linux.  Patch submitted by Alex Rhomberg
 	<rhomberg@ife.ee.ethz.ch>.
	
Thu Oct  8 23:43:59 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/repodlgs.c: This patch removes the limit on how many
 	cities you can have in the city report.  Patch submitted by David
 	Pfitzner <dwp@mso.anu.edu.au>.
	
Thu Oct  8 23:42:23 1998  Mitch Davis <mjd@alphalink.com.au>:

	* ai/aicity.c, ai/aiunit.c: Fixes for some typoes in the AI code.
  	Patch submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Oct  7 23:41:19 1998  Mitch Davis <mjd@alphalink.com.au>:

	* server/civserver.c: The saveturns server option has a problem in
 	that if you change the value, the new value doesn't take effect
 	until after the next save caused by the current value.  Eg: if
 	you're playing with saveturns=10, and then decide to change to
 	saveturns=1, the changeover doesn't occur until _after_ the
 	current block of 10 turns is finished.  This patch fixes the
 	problem.  Patch submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Oct  7 23:26:04 1998  Mitch Davis <mjd@alphalink.com.au>:

	* debian/rules: The 'debian/rules' file still references CHANGES
 	rather than the new (as of 1.6.1) ChangeLog, so building the
 	package fails.  Patch submitted by Robert Donn
 	<squirk@ihug.co.nz>.
	
Wed Oct  7 23:20:59 1998  Mitch Davis <mjd@alphalink.com.au>:

	* common/city.c, common/city.h, common/genlist.c,
 	common/genlist.h, common/unit.c, common/unit.h, server/gamehand.c,
 	server/plrhand.c: This patch preserves city list and unit list
 	orderings through save/reload, both the trivial fix of
 	pplayer->units and pplayer->cities, and also a more involved fix
 	to preserve the ordering in tile.units and city.supported_units.
  	Patch submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Oct  7 14:29:33 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/colors.c: Changed the yellow color so it actually looks
 	like yellow and not gray.
	
Wed Oct  7 13:35:33 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/gamehand.c, server/stdinhand.c: Fixed for some server
 	variables not being saved right.  Patch by David Pfitzner.
	
Tue Oct  6 23:50:49 1998  Mitch Davis <mjd@alphalink.com.au>:

	* server/mapgen.c: Recent CVS mapgen changes didn't seem to
 	realize the scenario patch is already in CVS, and overwrote the
 	scenario changes in mapgen.c, breaking scenarios.  This patch puts
 	the scenario changes back in.  Patch submitted by David Pfitzner
 	<dwp@mso.anu.edu.au>.
	
Mon Oct  5 10:18:30 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h: Cleaned up errors xrdb found in
 	the resources.
	
Mon Oct  5 10:11:54 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h, client/xmain.c: Made some of the
 	widgets look nicer with Xaw3d.  Cleaned up the econ buttons
 	somewhat.
	
Mon Oct  5 08:04:13 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h: Stuck a Freeciv* infront of all
 	the resources.  I did a survey of Xt based programs, and they seem
 	split as to how they do their resources.  Some begin the resources
 	with the app class, other just begin with a *.  Putting the app
 	class first seems better to me, as it avoids conflicts with
 	another app's resources.  Well see how this works out.
	
Sat Oct  3 07:08:23 1998  Mitch Davis <mjd@alphalink.com.au>:

	* server/mapgen.c: Improvements to the map generation code, to
 	make player placement more stable and less predictable.  Patch
 	submitted by Peter Schaefer
 	<schaefer@malaga.math.uni-augsburg.de>.
	
Sat Oct  3 07:07:44 1998  Mitch Davis <mjd@alphalink.com.au>:

	* Makefile.noimake, client/Freeciv.h, client/Makefile.am,
 	client/Makefile.in: This patch modifies the (three) makefiles so
 	that a C style comment is included in client/Freeciv.h to tell
 	people not to edit it.  Patch submitted by Dee Jay Randall
 	<randal@cs.uregina.ca>.
	
Thu Oct  1 17:29:12 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/dialogs.c: Minor patch to make a bogus warning go away.
	
Wed Sep 30 23:18:38 1998  Mitch Davis <mjd@alphalink.com.au>:

	* common/log.c, server/stdinhand.c: Yet another fix for Peter
 	Schaefer's buggy repeated message log stuff.  Patch supplied by
 	David Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Sep 30 20:26:11 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/tiles.xpm, data/units.xpm: The tiles and units XPM files
 	used a total of 124 different colors, but most of these colors are
 	very similar and wasted.  I changed them to use a total of 32
 	colors and then touched them up somewhat.  The new graphics are
 	much more colormap friendly on 8 bit systems and look almost
 	exactly the same.
	
Wed Sep 30 07:38:32 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h, client/dialogs.c: Made the unit
 	select dialog have more than one column, depending on how many
 	units are in the square.  Cleaned up the code some, removed some
 	global variables which were never used, and took out an extra
 	include.
	
Wed Sep 30 01:02:31 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/dialogs.c: Moved an XSetForeground out of a loop, to
 	reduce unnecessary X events.  Took out the explicit setting of the
 	size of the unit selection buttons.  The explict size was wrong
 	under Xaw3d, and wasn't necessary.
	
Tue Sep 29 23:27:17 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/repodlgs.c: When city_report_dialog_update_city() is
 	called to update the text for a single city, the report is not
 	changed (so no flicker) if the new text is actually the same as
 	the old text.  Patch submitted by David Pfitzner
 	<dwp@mso.anu.edu.au>.
	
Tue Sep 29 23:24:44 1998  Mitch Davis <mjd@alphalink.com.au>:

	* common/log.c: There is some sloppyness in flog in the last
 	repeat message.  Added a few lines(in a hurry, I must admit).
  	Patch submitted by Peter Schaefer
 	<schaefer@malaga.math.uni-augsburg.de>.
	
Tue Sep 29 23:15:24 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/cityhand.c: I added the few lines necessary to make
 	autoarrange update 'adjacent' cities, too.
	
	While testing, I noticed a quirk - disbanding a unit in a city
 	that has just been built and failing to change production from
 	warrior to settler.
	
	Fixed, with the side effect that the did_buy flag won't be set
 	anymore if there are enough shields to produce anyway.
	
	Patch submitted by Peter Schaefer
 	<schaefer@malaga.math.uni-augsburg.de>.
	
Tue Sep 29 23:13:40 1998  Mitch Davis <mjd@alphalink.com.au>:

	* common/log.c: This patch detected identical repeating log
 	messages, and issues a repeating message when this happens.  Patch
 	supplied by Peter Schaefer <schaefer@malaga.math.uni-augsburg.de>.
	
Mon Sep 28 18:14:46 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, client/citydlg.c, data/Freeciv: Added a new
 	button to the city dialog, which pops up the unit selection list
 	you would get for stacked units not in a city.  From a patch by
 	Massimo Campostrini.
	
Mon Sep 28 17:08:25 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/gamehand.c: Patch by David Pfitzner, remove huts on
 	player start positions.
	
Wed Sep 23 23:20:10 1998  Mitch Davis <mjd@alphalink.com.au>:

	* server/cityturn.c: When city size is 7, and you're on the verge
 	on expanding into a city of size 8, but you don't have an aqueduct
 	system set up, your Granary will still have its food supplies
 	halved. Same for cities of size 12 with Sewer systems.  Patch
 	submitted by Paul Cameron <pmcamero@socs.uts.EDU.AU>.  Note, I had
 	to apply this patch by hand, hope it's alright.
	
Wed Sep 23 23:09:46 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/citydlg.c: In the same spirit as desensitising the trade
 	button in the city report, this desensitises the "activate units"
 	button when there are no units present.  Patch supplied by David
 	Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Sep 23 23:07:52 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/Makefile.in, client/climisc.c: This patch allow for the
 	datadir path to be compiled in.  Patch submitted by Sergey Shkonda
 	<serg@bcs.zp.ua> and Matthew Hunt <mph@pobox.com>.
	
Wed Sep 23 23:02:05 1998  Mitch Davis <mjd@alphalink.com.au>:

	* README: This patch describes setting logs and debug levels from
 	the command-line of the server.  Patch submitted by David Pfitzner
 	<dwp@mso.anu.edu.au>.
	
Wed Sep 23 23:00:09 1998  Mitch Davis <mjd@alphalink.com.au>:

	* server/unitfunc.c: - The effect of Leonardo's Workshop is
 	special cased to avoid the problem of upgrading a sea unit
 	carrying passengers to a new unit with a lower transport_capacity
 	when that would leave some passengers stranded on a ocean square.
	(Eg Frigate -> Ironclad) (You could still get upgraded at an
 	inopportune time, but thats half the fun of Leonardo :-?
	
	- Carriers and Subs can only refuel the appropriate number of air
 	units each (previously you could stack as many air units onto one
 	of these as you like, and they would all get refueled (just not
 	all moved with the Carrier)).  Multiple Carriers and/or Subs on
 	the same square are handled appropriately.
	
	Patch submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Sep 23 22:58:38 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/citydlg.c: In a city dialog, if you select a supported
 	unit which is not present in the city, and chose "Activate unit,
 	close dialog" then the dialog doesn't get closed.
	
	This is because present_units_activate_close_callback() is used,
 	which only closes the dialog of the city where the unit is
 	present.  The attached patch fixes this by adding a separate
 	callback for supported units.
	
	Patch submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Sep 23 22:54:43 1998  Mitch Davis <mjd@alphalink.com.au>:

	* server/cityhand.c: A patch to handle deleting unsupported units
 	better.  Patch submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Sep 23 19:24:40 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/citydlg.c, client/dialogs.c, client/mapview.c,
 	client/xmain.c: Some changes to clear buttons with unit pixmaps in
 	them when using non-transparent flags.  Changed the client startup
 	order to load the unit pixmaps before creating the client widgets,
 	so they can be sized correctly based on the pixmap size.
	
Wed Sep 23 19:21:35 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h: Removed hardcoded sizes for the
 	unit pixmap buttons.  Also changed the font used in the city
 	report, which makes the report somewhat smaller.
	
Tue Sep 22 16:22:24 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, client/messagedlg.c, client/optiondlg.c,
 	client/optiondlg.h, client/repodlgs.c, data/Freeciv: Changed the
 	way most of the toggles look.  They now change label from "Yes" to
 	"No" depending on their state.
	
Mon Sep 21 09:35:48 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h: Added default colors for Label,
 	Command, Text, and Form widgets.  Then removed hundreds of color
 	resources that were no longer necessary.
	
Mon Sep 21 09:19:27 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/connectdlg.c, client/clinet.c, client/clinet.h,
 	data/Freeciv: Added a metaserver dialog to the client.  It's
 	currently a little hackish, and gets the server list by reading
 	the metaserver web page and trying to parse it.  It will probably
 	choke if the web page's format changes.
	
Mon Sep 21 09:08:09 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/repodlgs.c, data/Freeciv: Might have finally fixed the
 	city report sizing bug seen on some machines.
	
Mon Sep 21 08:39:56 1998  Trent Piepho <xyzzy@u.washington.edu>

	* Makefile.noimake: The depend stuff has a problem.
	
Sat Sep 19 16:26:46 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/Freeciv.h, data/Freeciv: This fixes a small mistake with
 	the On/Off label for the science report help toggle.  Patch
 	submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Sat Sep 19 16:23:26 1998  Mitch Davis <mjd@alphalink.com.au>:

	* data/helpdata.txt: This patch revises the About text: It
 	clarifies the current status of the original authors, James
 	Blackwell is no longer active as a "Present Administrator", and
 	the text said "find our email addresses in the About box", but
 	this _is_ the About box!  Patch supplied by David Pfitzner
 	<dwp@mso.anu.edu.au>.
	
Sat Sep 19 16:21:00 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/mapctrl.c, common/map.c: This patch improves the
 	information on a tile when there is a hut or pollution present.
  	Patch supplied by David Pfitzner <dwp@mso.anu.edu.au>.
	
Sat Sep 19 16:03:46 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/citydlg.c, client/civclient.c, client/graphics.c,
 	client/helpdlg.c, client/helpdlg.h, client/repodlgs.c,
 	client/xmain.c, data/helpdata.txt: This patch makes some
 	improvements to the help system.
	
	Tags are added to helpdata.txt to say explicitly whether items are
 	TEXT, UNIT, IMPROVEMENT, WONDER, or TECH.  And in the code to
 	popup a help text, you can ask for a particular type.  One effect
 	this has is that the Government help items Monarchy etc don't need
 	a "(Gov)" addition to distinguish them from the corresponding
 	advances.
	
	The help system is slightly more robust and nicer if a help item
 	doesn't correspond to the specified component of the game
 	(unit_type etc) or the component has been "removed".  Or vice
 	versa -- if a game component doesn't have a help item for some
 	reason.  One effect of this is that unimplemented Civ2 units etc
 	can be added back to the help with an explanatory note, so players
 	coming from Civ2 can see what's missing and possibly why.
	
	Comments for unit types relating to transport_capacity, flags, and
 	fuel, are generated automatically, ensuring clarity, consistency,
 	correctness, cetc.
	
	boot_help_texts() was moved to after log_init(), so log messages
 	in boot_help_texts are actually useful.
	
	client/helpdlgs.c:find_help_item_by_topic() is #if-ed out, as it
 	appears to me to be unused, and furthermore broken.
	
	changes to helpdlgs.c aren't really as drastic as the patch makes
 	appear, but I've moved some things around.
	
	citydlg.c:change_help_callback() was pretty weird, and now cleaned
 	up.
	
	Patch supplied by David Pfitzner <dwp@mso.anu.edu.au>.
	
Sat Sep 19 15:11:17 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/Freeciv.h, client/citydlg.c, client/packhand.c,
 	data/Freeciv: This patch makes upgrading individual units from the
 	city dialog nicer.  Now the upgrade button is "greyed out" if you
 	cannot upgrade that unit type.  Also, the patch updates the unit
 	icon in the city dialog where the unit is present (as well as
 	where the unit is supported).  (This also applies for unit
 	upgrades from the "active units" dialog.)  Patch submitted by
 	David Pfitzner <dwp@mso.anu.edu.au>.
	
Sat Sep 19 03:31:50 1998  Mitch Davis <mjd@alphalink.com.au>:

	* COPYING, data/helpdata.txt: Updated the mailing addresses for
 	the FSF.  Patch submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Sat Sep 19 02:28:52 1998  Mitch Davis <mjd@alphalink.com.au>:

	* server/mapgen.c: A small patch because some players would get
 	too many rivers and not enough swamps.  Patch submitted by Peter
 	Schaefer <schaefer@malaga.math.uni-augsburg.de>.
	
Fri Sep 18 16:21:32 1998  Mitch Davis <mjd@alphalink.com.au>:

	* common/map.c, common/map.h, server/mapgen.c: This patch fixes
 	some problems with the 2nd mapgen, and enhances the 3rd mapgen.
  	Patch supplied by Peter Schaefer
 	<schaefer@malaga.math.uni-augsburg.de>.
	
Thu Sep 17 23:46:14 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/Freeciv.h, client/repodlgs.c, data/Freeciv: Here is a
 	minimalish patch which adds a note which might make the help
 	button toggle nature a little clearer...
	
	It also makes the science report list of known advances 4 columns,
 	partly to make more room for the above mentioned note, and partly
 	because I find the science report too long (at least in its
 	default pop-up location) for my screen when it contains all the
 	advances at the end of a game.
	
	Patch supplied by David Pfitzner <dwp@mso.anu.edu.au>.
	
Thu Sep 17 23:33:24 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/Freeciv.h, client/connectdlg.c, client/resources.h,
 	client/xmain.c, data/Freeciv, server/civserver.c: Changes to allow
 	the debug level to be set from the command-line.  Patch submitted
 	by David Pfitzner <dwp@mso.anu.edu.au>.
	
Thu Sep 17 23:23:52 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/colors.c: The solid colors for Romans and English are too
 	similar.  This changes the English color to dark green.  Patch
 	submitted by Massimo Campostrini <campo@mailbox.difi.unipi.it>
	
Thu Sep 17 23:19:13 1998  Mitch Davis <mjd@alphalink.com.au>:

	* data/europe.sav: Added a Europe scenario.  Patch supplied by
 	Christian Grothoff <ma0035@stud.uni-wuppertal.de>.
	
Thu Sep 17 23:16:40 1998  Mitch Davis <mjd@alphalink.com.au>:

	* client/mapview.c, data/earth-160x90.sav, data/earth-80x50.sav,
 	server/civserver.c, server/gamehand.c, server/mapgen.c,
 	server/maphand.c, server/maphand.h, server/stdinhand.c: Patches
 	and scenario files to support playing on Earth.  Patch supplied by
 	Daniel Gudlat <gudlat@informatik.hu-berlin.de>.
	
Thu Sep 17 10:12:18 1998  Trent Piepho <xyzzy@u.washington.edu>

	* Makefile.noimake: Fixed and largely rewrote.  Should work well
 	now, and be easy to edit to compile on different OSes.
	
Wed Sep 16 11:58:46 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Makefile.am, client/Makefile.in, common/Makefile.am,
 	common/Makefile.in: Some directories were -I included when they
 	didn't need to be.
	
Wed Sep 16 11:53:13 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unithand.c, server/unitfunc.c, common/player.h: Fixed up
 	some include problems.  player.h had aitools.h for no reason,
 	which meant that the client and common code needed the ai includes
 	for no reason.
	
Tue Sep 15 15:21:45 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/xmain.c: Added a missing NULL on an XtVaGetValues() call.
	
Wed Sep  9 13:00:58 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/registry.c: A better hash function for the registry,
 	along with a smaller cache size.  Creating section files,
 	ie. saving the game, is now much faster for large files as the
 	algorithm was changed from O(n^2) to O(n).
	
Wed Sep  9 12:00:35 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/citydlg.c, common/city.c, common/city.h: Trade button is
 	grayed out if the city has no trade routes.  Inspired by a patch
 	from David Pfitzner.
	
Wed Sep  9 11:39:25 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityhand.c: Fix for longstanding bug where the server
 	could core dump if a city is removed and it has supports both a
 	transport ship and some unit in the ship.  Patch by Paul Cameron.
	
Sun Sep  6 11:32:12 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/unit.c, server/unithand.c: Cleaned up
 	can_unit_do_activity()
	
Sun Sep  6 11:31:39 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityturn.c: Made city incite cost half when there are no
 	units in the city, rather than when it supports no units.
	
Sun Sep  6 00:39:35 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c, ai/aiunit.c: Fixing a quirk with exploring
 	boats, and AI exploring ferryboats in normal mode.  Fixing a
 	possible SIGFPE in findjob of all places.  Not discouraging units
 	to attack enemy units nearby - works great!  Eliminating default
 	want for walls, coastal, etc if not in danger. -- Syela
	
Sun Sep  6 00:37:39 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c, server/cityturn.c: No longer hijacking
 	content[0]; trying to get the AI to build more temples and
 	happy-wonders.  Using MORT (instead of ~17) as the threshold for
 	improvements to pay themselves off, hoping that the AI will not
 	buy so many improvements. -- Syela
	
Sun Sep  6 00:31:28 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Teaching autosettlers about changing terrain
 	types. -- Syela

Wed Sep  2 20:37:06 1998  Mitch Davis <mjd@alphalink.com.au>

	* CREDITS, configure, configure.in, client/Freeciv.h,
 	common/shared.h, data/Freeciv: Bumped version numbers to 1.7.1.
	
Wed Sep  2 20:12:32 1998  Mitch Davis <mjd@alphalink.com.au>

	* NEWS, configure, configure.in: With this patch to configure.in
 	freeciv will actually configure and compile nicely on Solaris (run
 	"autoconf" after applying this patch to make a new configure):
	
	Note that according to Johannes Abt
 	<jsabt@cip.informatik.uni-erlangen.de>, This works with
 	autoconf-2.12 but not autoconf-2.9.
	
	Patch supplied by Finn Arne Gangstad <finnag@guardian.no>.
	
Wed Sep  2 19:57:40 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/unit.c: This patch prevents settlers from fortifying, in
 	order to reduce the confusion between fortifying and building
 	fortresses.  Patch supplied by David Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Sep  2 00:54:52 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h: Changed the layout of the
 	diplomat and spy dialogs so the buttons are in a two column list
 	instead of one big long row.  Buttons are now the same size with
 	centered labels, which looks nicer IMHO.
	
Tue Sep  1 22:08:02 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/civclient.c, common/game.c, server/civserver.c: Bug fix
 	from Walter Misar to fix alignment problems on solaris with the
 	used_ids array.
	
Tue Sep  1 21:57:57 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/dialogs.c: Diplomats bribing units wasn't done right.
	
Tue Sep  1 21:56:36 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/unit.c: diplomat_can_do_action() was letting non-spies
 	sabotage units.
	
Tue Sep  1 14:34:49 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Dealing with GOTOing warships more
 	intelligently re: enemies_at. -- Syela
	
Tue Sep  1 14:32:38 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unittools.c: Ignoring units at (i,j) for enemies_at(punit,
 	i, j).  -- Syela
	
Mon Aug 31 13:12:12 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/repodlgs.c: The "Income" line in the trade report will try
 	to approximate what your true income will be at the end of the
 	turn.  This means it will not be affected by buying or selling
 	things.  City improvements which will be completed at the end of
 	the turn can throw things off.
	
Mon Aug 31 12:59:46 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unithand.c: Added buffering around the data sent when a
 	trade route is established.
	
Mon Aug 31 12:57:46 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/plrhand.c: Made changing tax rates do a gobal city
 	refresh.  This way the client gets instant feedback on how the new
 	rates effect his cities.
	
Mon Aug 31 12:54:33 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityturn.c: Buffered the connection during a global city
 	refresh.
	
Mon Aug 31 09:23:23 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/repodlgs.c: Fixed bug were the client would crash trying
 	to update the city report when it didn't exist.
	
Sat Aug 29 13:18:58 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, client/citydlg.c, client/repodlgs.c,
 	client/repodlgs.h, data/Freeciv: Changed the city report code so
 	that the whole report isn't generated when a single city is
 	changed.  Changed the way the widgets resize themselves to get
 	around broken Xt annoyingness so the labels should be centered and
 	the right size now.  There should also be less flickering when the
 	report is updated.
	
Sat Aug 29 13:09:43 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/packets.h: The improvements and city_map where called
 	unsigned char, but they really should be just plain char.
	
Sat Aug 29 13:08:35 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/stdinhand.c: Took out a comma where there shouldn't have
 	been one.
	
Fri Aug 28 10:36:54 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Fixing auto-explorers (I broke them yesterday)
 	-- Syela
	
Thu Aug 27 09:58:41 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Returning 0 for same_pos
 	handle_unit_move_requests (which often happen when the server
 	hangs) so movement isn't wasted.  Making the check for ai
 	ferryboats that try to attack much more robust to prevent aberrant
 	abort()s.  Allowing 0-move explorers to change acitivity. -- Syela
	
Thu Aug 27 09:56:52 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/civserver.c, server/stdinhand.c, server/stdinhand.h:
 	Proto'ing set_ai_level and setting game.skill_level concurrently --
 	Syela
	
Thu Aug 27 09:56:05 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Fixing stupid bug involving auto-settlers and
 	polar cities. -- Syela
	
Thu Aug 27 09:55:22 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityhand.c: Adding city name to city_sell message (for AI
 	debugging) -- Syela
	
Thu Aug 27 09:54:44 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/mapctrl.c: Allowing players to idle 0-movement explorers
 	by clicking on them. -- Syela
	
Thu Aug 27 09:48:08 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Not assuming walls for cities 2-3 turns away unless
 	owner knows Masonry. -- Syela
	
Thu Aug 27 09:47:00 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Two bugfixes suggested by Peter Schaefer; preventing
 	the AI from setting lux=100 and selling buildings, and preventing
 	extremely high lux rates (for celebrations) that will lead to
 	selling buildings. -- Syela
	
Thu Aug 27 09:45:57 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Preventing the AI from buying walls/coastal
 	unless it's urgent.  Not assuming walls until c == 4 if enemy
 	doesn't know masonry.  Adding port_is_within to prevent the AI from
 	building too many ports and warships; this way saves money and also
 	ensures enough ground troops for invasions. -- Syela
	
Thu Aug 27 09:43:27 1998  John Stonebraker <ppaqebb@surfshop.net>

	* README.AI: Updated README.AI; recently fixed problems not
 	included. -- Syela
	
Thu Aug 27 09:35:04 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, client/mapview.c, client/xmain.c, data/Freeciv:
 	Made the map canvas fill up all the space.  Before, if you had a
 	map with ysize>40 the canvas would have a big gap between the
 	scroll bar and the message window.
	
Wed Aug 26 22:57:43 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h, client/gotodlg.c: Added a "All
 	Cities" toggle to the goto dialog.  Default is off.  This way the
 	dialog isn't full of hundreds of enemy cities.  Makes airlift much
 	less of a pain, since it doesn't take as long to find your city.
	
Wed Aug 26 22:54:53 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unitfunc.c: Fixed up do_airline() some.  It now uses
 	unit_can_airlift_to() to determine if an airlift is possible rather
 	than duplicating the code.  It also wasn't sending city updates for
 	the cities involved, so the client wouldn't know that a city had
 	already airlifted this turn.  Added buffering around the four
 	packets an airlift sends.
	
Wed Aug 26 00:05:23 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/citydlg.c: De-activated the activate button on diplomat
 	investigate city dialogs.
	
Tue Aug 25 22:53:25 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/repodlgs.c, client/repodlgs.h: Added in Cedric Tefft's
 	scrollbar for the city report patch.  Added code for turning of
 	report updates at the end of the turn.
	
Tue Aug 25 22:49:16 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/packhand.c: Made handle_unit_info() smarter about
 	refreshing city dialogs.  For instance, moving a unit out of its
 	homecity would refresh the city dialog twice.  Made the client turn
 	off report updates between during the end of the turn.  This
 	removes the flash in the reports as they would get updates hundreds
 	(or thousands!) of times.
	
Tue Aug 25 22:44:08 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/citydlg.c: The city_dialog_refresh() function had a hack
 	to update the city and trade reports when it was called.  However,
 	this function gets called for things relating to enemy cities that
 	don't show up in the reports.  So I made it only update the reports
 	for when it's called for the players own cities.  This greatly
 	reduces the number of costly city report refreshes the client does.
	
Tue Aug 25 22:41:10 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, data/Freeciv: Added in Cedric Tefft's patch for
 	a scrollbar on the city report.
	
Tue Aug 25 22:39:50 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityhand.c: Fixed a bug where nocity_send wasn't taking
 	effect.  This resulted in two city updates being sent at the end of
 	the turn for each of your cities.  Now it's down to one.
	
Tue Aug 25 09:15:27 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/civserver.c: Moving before_end_year (which does nothing
 	but reset message windows) closer to the end_of_sniff to make David
 	Pfitzner happy. -- Syela
	
Tue Aug 25 09:10:55 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/stdinhand.c: Applying David P's fix to the recently broken
 	set_ai_level -- Syela
	
Tue Aug 25 09:10:21 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/citydlg.c, client/packhand.c: Made the city dialogs get
 	updated when a unit listed in one (present or supported) changes
 	status.
	
Tue Aug 25 09:08:38 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/mapgen.c: Initializing counter j in mapgenerator2 and
 	3. -- Syela
	
Tue Aug 25 09:07:44 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Removing unneeded duplicate def'n of punit in
 	wakeup_neighbour -- Syela
	
Tue Aug 25 08:46:13 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h, client/citydlg.c: Added an
 	"Activate Units" button to the city dialog that will activate all
 	units in the city.
	
Tue Aug 25 08:23:35 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/repodlgs.c: The trade report sell command won't try to
 	sell improvements in cities that already sold something that turn.
	
Mon Aug 24 23:40:24 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/unithand.c: Added code so that sentried units get woken up
 	when enemy units come within view.  Patch submitted by Trevor
 	Pering <pering@tongass.EECS.Berkeley.EDU>.
	
Mon Aug 24 23:32:48 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/stdinhand.c: This patch forces AI names to be between 1
 	and 9 chars long.  I chose 9 chars because it seems to be length
 	you are allowed to use for a human player.  Patch submitted by
 	Markus Linnala <maage@cs.tut.fi>.
	
Mon Aug 24 21:12:37 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/registry.c: Added code to align the pointer returned by
 	strbuffermalloc().
	
Mon Aug 24 10:39:24 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityhand.c: Nothing much really.
	
Sun Aug 23 23:43:04 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/Freeciv.h, client/civclient.c, client/optiondlg.c,
 	client/packhand.c, data/Freeciv, data/helpdata.txt: This patch
 	fixes problems with the original wakeup code.  (Eg, data/Freeciv
 	was only partly patched!)  Patch submitted by Reinier Post
 	<reinpost@win.tue.nl>.
	
Sun Aug 23 23:40:10 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/stdinhand.c: Modified the help string for map.seed so it
 	mentions that 0 gives a random map.  Patch submitted by Reinier
 	Post <reinpost@win.tue.nl>.
	
Sun Aug 23 23:31:27 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/map.h, server/mapgen.c: I took a look at the map generator
 	and reduced the chance it will hang up, so that it may work with
 	much more settings.
	
	While I was at it, I added an experimental generator 3, which will
 	create 1 big island for every player, and 1 small island.  Settings
 	for landmass will affect the changed mapgen 2.  Settings for
 	mountains, etc, won't yet.
	
	Patch submitted by Peter Schaefer
 	<schaefer@malaga.math.uni-augsburg.de>
	
Sun Aug 23 23:29:35 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/game.c, common/game.h, common/map.h, server/plrhand.c,
 	server/stdinhand.c: Attached is a small patch that fixes a bug in
 	the scorelog generation code... I screwed up the starting year (I
 	used 4000 instead of -4000)...  I made that number a constant in an
 	include file.  (Affects game.c, game.h, map.h, and plrhand.c).
  	Patch submitted by Trevor Pering
 	<pering@tongass.EECS.Berkeley.EDU>.
	
Sun Aug 23 23:27:17 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/civclient.c, client/clinet.c, client/colors.c,
 	client/graphics.c, client/helpdlg.c, client/packhand.c,
 	client/xmain.c, common/log.c, common/log.h, common/packets.c,
 	common/unit.c, server/cityhand.c, server/civserver.c,
 	server/maphand.c, server/registry.c, server/sernet.c,
 	server/stdinhand.c, server/unitfunc.c: Changed all occurances of
 	"log()" to "flog()", since the GTK port of Freeciv needs the -lm
 	math library, which also has a log() function.  Patch submitted by
 	Per I. Mathisen <perrin@kvalito.no>.
	
Fri Aug 21 21:00:37 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/stdinhand.c: The section file wasn't getting freed after a
 	manual save game.
	
Fri Aug 21 20:57:04 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/registry.c, server/registry.h: Fixed a bug I had added
 	earlier where the strbuffer would get freed when it hadn't been
 	allocated during an auto save game.  Used the opportunity to have
 	the rest of the registry allocations use the strbuffer system,
 	which reduced memory usage by another 200k for a big saved game.
	
Fri Aug 21 20:49:39 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/shared.c, common/shared.h: Removed the minstrdup()
 	function and put it into registry.c, since that is the only place
 	that used it.  Also changed it to use the strbuffer system.
	
Fri Aug 21 20:34:08 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/civserver.c, server/diplhand.c, server/gamehand.c,
 	server/gamehand.h, server/maphand.c, server/maphand.h,
 	server/plrhand.c, server/plrhand.h: Fixed some ugliness with the
 	includes.
	
Fri Aug 21 08:17:50 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Not letting auto-settlers go idle as easily.
  	Christopher Neufeld's ideas, but my own implementation thereof. --
 	Syela
	
Thu Aug 20 23:18:06 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/city.c, server/plrhand.c: The attached patch makes the
 	Literacy field of the Demographics report less likely to overflow
 	(eg at the end of a large game).  Patch submitted by David Pfitzner
 	<dwp@mso.anu.edu.au>.
	
Thu Aug 20 21:46:04 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/plrhand.c, server/registry.c, server/registry.h: David
 	Pfitzner's patch to handle new savefile entries, which also handles
 	the foulness issue much better than my (non-uploaded) kluge. --
 	Syela
	
Thu Aug 20 21:44:23 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/citydlg.c, client/dialogs.c, client/packhand.c,
 	common/city.h, common/packets.c, server/cityhand.c,
 	server/plrhand.c, server/unitfunc.c: Reimplementing
 	diplomat_investigate in a less obtrusive way that does not hose
 	compatibility with 1.7.0.  Making create_advances_list more robust
 	and fixing a lot of other warnings in the spy and scorelog patches.
  	Adding savefile_options to player_load, but not using it. -- Syela
	
Thu Aug 20 21:37:55 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/connectdlg.c: Changing an #if to an if() so that -Wall is
 	happy. -- Syela
	
Thu Aug 20 21:31:10 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Fixing a typo in kill_unit that apparently
 	crashed the server. -- Syela
	
Thu Aug 20 11:52:45 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/registry.c: Small change to hash function that decreases
 	collisions by 50% for huge save files.  Made a custom string
 	allocation function for the strings used by the section file loader
 	and the hash table.  This avoids malloc overhead on each string and
 	avoids having to iterate over all the hash table buckets to free
 	them.  This decreased load time by %17 and reduced the server's
 	memory usage by 804k.
	
Thu Aug 20 11:17:24 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/civserver.c, server/gamehand.c: Moved the load timing
 	stuff from gamehand to civserver.  This way it can time the whole
 	loading process, including hash table creation.  Also used clock()
 	instead of time() to get CPU time in clock ticks for more accuracy.
	
Thu Aug 20 05:24:31 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Fixing one of those SIGFPE's I love so very much
 	(in is_my_turn) -- Syela
	
Thu Aug 20 04:20:10 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/civserver.c: Added a function prototype for
 	read_init_script().
	
Wed Aug 19 23:48:20 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/gamehand.c, server/registry.c, server/registry.h: The
 	attached patch adds a hash table to the registry to speed up
 	lookups -- to speed up loading the savefile.  (The current method
 	is O(N^2) where N is the "size" of the savefile; this patch should
 	make it more like O(N).)  Patch submitted by David Pfitzner
 	<dwp@mso.anu.edu.au>.
	
Wed Aug 19 23:35:10 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/Freeciv.h, client/mapctrl.c, client/mapctrl.h,
 	client/menu.c, client/packhand.c, client/xmain.c, data/Freeciv:
 	Added a 'wakeup' command (W for a unit - shift/click on tile) to
 	unsentry all units on a given tile.  Patch submitted by Reinier
 	Post <reinpost@win.tue.nl>.
	
Wed Aug 19 23:27:43 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/civserver.c: Added an '-r' option to the server, which
 	will read in an initilization script at server startup time.  Patch
 	submitted by Trevor Pering <pering@tongass.EECS.Berkeley.EDU>.
	
Wed Aug 19 23:24:50 1998  Mitch Davis <mjd@alphalink.com.au>

	* configure, configure.in: Removed the explicit check for the
 	install program, as this is done automatically.  Bug reported by
 	Tony <stuckey@jaka.ece.uiuc.edu>.
	
Wed Aug 19 23:17:11 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/Freeciv.h, client/citydlg.c, client/dialogs.c,
 	client/mapctrl.c, client/packhand.c, common/city.h,
 	common/packets.c, common/packets.h, common/unit.c, common/unit.h,
 	data/Freeciv, data/helpdata.txt, server/cityhand.c,
 	server/plrhand.c, server/unitfunc.c, server/unitfunc.h,
 	server/unithand.c: The latest round of spy/diplomat changes from
 	Kris Bubendorfer <Kris.Bubendorfer@MCS.VUW.AC.NZ>.
	
Wed Aug 19 23:09:33 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/Freeciv.h, client/repodlgs.c, common/city.c, data/Freeciv:
 	Addition to the city report dialog: (+gold/science/luxury) Patch
 	supplied by Dee Jay Randall <randal@cs.uregina.ca> and David
 	Pfitzner <dwp@mso.anu.edu.au>.
	
Wed Aug 19 22:47:40 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/citydlg.c: On some systems (SunOS 4.1.2 is the one in
 	question), sprintf returns a 'char *' instead of an 'int'.  This
 	fixes that.  Patch submitted by Trevor Pering
 	<pering@tongass.EECS.Berkeley.EDU>.
	
Wed Aug 19 22:47:11 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/gamehand.c: Added capability code for the scorelog.  Patch
 	submitted by Trevor Pering <pering@tongass.EECS.Berkeley.EDU>.
	
Wed Aug 19 22:45:43 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/game.c, common/game.h, common/map.h, server/plrhand.c,
 	server/stdinhand.c: Some changes so that a score file is generated
 	which can be used to generate graphs of different statistics over
 	time. This is very similar to the graphs generated in CivI at the
 	end of the game.
	
	When the "scorelog" server option is turned on, a file called
 	"civscore.log" is created and updated every turn.  A post-
 	processing perl script (which can be found in the Freeciv contrib
 	dir) is then used to parse the log file and generate the output
 	files, which are formatted for "xgraph".
	
	This was submitted by Trevor Pering
 	<pering@tongass.EECS.Berkeley.EDU>.
	
Wed Aug 19 22:43:25 1998  Mitch Davis <mjd@alphalink.com.au>

	* data/helpdata.txt: Updated the anarchy help text.  Patch
 	submitted by Peter Schaefer <schaefer@malaga.math.uni-augsburg.de>.
	
Tue Aug 18 23:53:25 1998  Mitch Davis <mjd@alphalink.com.au>

	* ai/aihand.c: Fixed a problem where if a human player is being set
 	to ai while in ANARCHY, the ai would not go out of it.  Patch
 	submitted by Peter Schaefer <schaefer@malaga.math.uni-augsburg.de>.
	
Tue Aug 18 23:50:09 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/helpdlg.h: Fixed a minor bug in the new, improved Freeciv
 	1.7.0 help system.  In the civclient, when I select Help Playing,
 	the help system doesn't know where to go.  In particular, it
 	doesn't go to "Strategy and Tactics."  It seems that it gets
 	confused because "Playing" != "Strategy and Tactics".  Bug report
 	by Andrew E. Schulman <andrex@alw.nih.gov>, and patch by David
 	Pfitzner <dwp@mso.anu.edu.au>.
	
Tue Aug 18 11:37:53 1998  Trent Piepho <xyzzy@u.washington.edu>

	* ai/aiunit.c, common/game.c, common/map.c, common/map.h,
 	server/gotohand.c, server/plrhand.c, server/settlers.c: The tile
 	structure had a city ID in it, which is silly because city IDs are
 	pretty much useless.  Changed it to a city pointer which should
 	make map_get_city() a lot faster.  I wonder if this makes the city
 	cache (actually city id index would be a better name, because it
 	doesn't really "cache") unnecessary.
	
Tue Aug 18 11:34:06 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/civserver.c: Initialized the city cache before a saved
 	game is loaded.  Fixed the ID allocation function to ship ID 0.
	
Tue Aug 18 11:30:28 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityhand.c: Changed the city cache a little bit.  Tried a
 	few hashing algorithms, but no hashing at all worked best.
	
Sun Aug 16 02:02:01 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unittools.c, server/unittools.h: Renaming rate_unit to
 	rate_unit_d, and adding rate_unit_a for analogous funct
 	get_attacker, which findvictim will call.  Returning 0 in friendly
 	cities in enemies_at. -- Syela
	
Sun Aug 16 02:00:29 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Adding territory array to try to keep
 	autosettlers safer.  The implementation is not very good, but I had
 	to do something.  Allowing ferryboats for very long
 	intracontinental trips.  Checking ZOC legality before trying to
 	disembark. -- Syela
	
Sun Aug 16 01:58:38 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Adding could_be_my_zoc to allow paths past
 	distant enemy units.  Discouraging Kaput! in find_a_dir. -- Syela
	
Sun Aug 16 01:55:52 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/city.h: Adding invasion to city ai struct -- Syela
	
Sun Aug 16 01:53:44 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Adding util funct tile_is_accessible so explorers
 	don't keep banging their heads into a ZOC-brick-wall.  Doing tricky
 	things to unit_bellig because get_attack_power is 99% worthless.
  	Writing invasion_funct, whose purpose is to force the AI to send
 	warships where its infantry are, and to send its infantry where its
 	warships are.  In reality, it tends not to make enough ground
 	troops, but it's at least tolerable now.  Writing is_my_turn so
 	that units in a stack attack in order; previously the invader would
 	attack before the battleships sometimes.  Hacking findvic so that
 	units defending cities attack pests more ambitiously.  Hacking
 	d_val so that fast units don't think they need bodyguards.  Keeping
 	invaders on boats longer so they don't disembark and die.
  	Preventing warships from looking for charge, since eight of them
 	would often suddenly try to defend one city.  The real problem is
 	elsewhere, but this kluge is adequate and much easier to program.
  	Treating fieldunits as non-defenders in findjob.  Faking targets in
 	f_s_t_k so that x and y are set even if there's nothing to kill so
 	that the AI will understand that steam engine allows actually
 	useful warships.  Doing lots of weird invasion stuff.  Removing +40
 	city-kill bonus for air/sea units unless ground/heli units are
 	included in the invasion.  Hacking sanity so that very long
 	intracontinental trips allow ferryboats.  Preventing long rides by
 	trireme.  Adding 'g' to attacker-want equation so that the AI sends
 	enough units to flatten a city in one turn.  Kluging so that the AI
 	won't build units just to kill caravans, since that never actually
 	works.  Using funky fprime variable instead of f in the denom, so
 	that def=1 units are penalized correctly.  Adding
 	find_nearest_friendly_port and telling bored ferryboats and wounded
 	warships to go there.  Teaching the AI that frigates are primarily
 	warships.  Not letting units aboard ferries fortify because weird
 	things happen in cities then.  -- Syela
	
Sun Aug 16 01:35:14 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Fixing horrible bug in the forced-disband routine.
  	AI used to disband the only defender of a city in disorder, which
 	is exactly what I intended to prevent.  -- Syela
	
Sun Aug 16 01:33:38 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Adding the line that makes the AI actually (very
 	rarely) build Magellan's.  Adding a wonder-kluge so that cities
 	don't abort almost-built wonders.  Allowing non-military builds if
 	want (usually attacker want) is over 100 with no urgency.  Fixing
 	rounding errors in one of those /30 functions.  Allowing the AI to
 	buy non-defensive units a little earlier than before.  Adding stuff
 	to the list of stuff to save up for.  Making the AI more frugal.
  	Forcing the AI to upgrade its triremes. -- Syela
	
Sun Aug 16 01:29:55 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Fixing almost all the typos and other
 	discrepancies between f_s_t_k and k_s_w attacker-want equations,
 	partly as preparation for modularizing that junk.  Adding some util
 	functs, assess_distance, assess_danger_unit.  Treating units that
 	are about to be produced in enemy cities as danger in
 	assess_danger.  Limiting p_d_w to costs <= shield_stock + 40; it
 	was annoying having the AI insist on using battleships for defense.
  	Changing unit_desira so that def=1 units are penalized elsewhere
 	instead.  Changing p_a_w to allow overrides of the chosen attacker
 	in case we need something with more defense or more speed or
 	something.  Doing ugly things to k_s_w that I can't even discern
 	from the diffs.  Fixing more bugs than I can count, or explain - no
 	one else noticed them since they merely caused suboptimal AI
 	behavior.  Want for military techs and handling of unhap is
 	standard and as intended now.  Fixing bug that caused AI warships
 	to yoyo.  Implementing ai.invasion.  Forcing the AI to build
 	defenders instead of attackers when it's in danger.  Forcing the AI
 	to build barracks before ground attackers.  Preventing the AI from
 	building units it can't upkeep.  Treating all unbuilt ground
 	attackers as vet, which encourages making barracks and ground
 	attackers.  I did a lot, and I probably forgot something. -- Syela
	
Fri Aug 14 22:52:10 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/civserver.h, server/sernet.c: Removed lots of extra
 	prototypes from civserver.h for functions that aren't in
 	civserver.c, then added another include to sernet.c because of a
 	missing prototype.
	
Fri Aug 14 22:47:03 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/packets.c: Fixed bug were the client would sometimes not
 	realize that an improvement was obsoleted by a wonder.
	
Fri Aug 14 22:45:17 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/city.c: Some small performance improvement to
 	wonder_replacement().
	
Fri Aug 14 21:52:45 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unithand.c: Fixed an old bug so the liberated/conquered
 	messages show up correctly.
	
Thu Aug 13 15:40:43 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aitools.c, ai/aitools.h, server/unitfunc.c, server/unithand.c:
 	Removing unused and broken dist_nearest_enemy_* functs.  Creating
 	and protoing dist_nearest_city, then calling it in the
 	combat-notify's.  Adding minor (almost meaningless) change to let
 	AI cities building wonders keep doing so.  Stopping AI warships on
 	GOTO.  Rewriting the 'Hey idiot' debug code to use abort() and to
 	abort() only if ai.passenger is nonzero, which should prevent
 	human-induced crashes.  Leaving the abort() in until I'm totally
 	sure the AI doesn't cause the problem itself.  Forcing AI units to
 	end moves early instead of moving right next to something that will
 	kill them. -- Syela
	
Thu Aug 13 09:45:20 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/packhand.c: Last patched used a global variable not
 	declared in this file, so it didn't even compile.  Used the helper
 	function get_unit_in_focus() rather than punit_focus directory, and
 	added the include file for update_menus().
	
Thu Aug 13 09:20:18 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityturn.c: Another bug pointed out by Walter Misar,
 	PACKET_TILE_INFO should have been TILE_KNOWN.
	
Thu Aug 13 08:57:37 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unitfunc.c: Fixed bug pointed out by Walter Misar,
 	capturing a city didn't give you any techs.  This has been around
 	since the future tech patch, I can't believe no one noticed until
 	now.
	
Thu Aug 13 07:31:28 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/stdinhand.c: Bug found by Benjamin Korvemaker, the maximum
 	map width was actually the max map height.
	
Wed Aug 12 14:15:40 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/menu.c, client/packhand.c: "Build Railroad" never shows up
 	in the Orders menu, even if it is a valid option.  I have rigged
 	this so that "Build Railroad" replaces "Build Road" in the Options
 	menu when appropriate.
	
	As I was working on this fix, I noticed a bug: If you click on a
 	unit which is engaged in some activity (pollution cleanup, road
 	building, etc.)  the Orders menu does not reflect the fact that
 	this unit is idle and can accept new orders until you click on that
 	unit a SECOND time. I found a fix for this problem and incorporated
 	it into this patch as well.  Patch submitted by Cedric Tefft
 	<cedric@earthling.net>.
	
Tue Aug 11 16:59:24 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, client/citydlg.c, client/mapctrl.c,
 	client/mapctrl.h, client/repodlgs.c, common/packets.c,
 	common/packets.h, data/Freeciv, server/civserver.c,
 	server/unithand.c, server/unithand.h: Added a option to upgrade
 	individual units to the present units menu in the city dialog.  Had
 	to add a new packet type to the server to support doing this.
	
Sun Aug  9 09:23:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/citytools.c: Crashless and more readable (if not
 	standardly whitespaced) version of transfer_city_units. -- Syela
	
Fri Aug  7 23:51:45 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/repodlgs.c: The trade report code was looking pretty
 	crufty, so I fixed it up.
	
Fri Aug  7 04:48:36 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/repodlgs.c: Removed C++ comments from two lines.  Moved a
 	line around too.
	
Thu Aug  6 17:16:52 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, client/dialogs.c, data/Freeciv: The diplomat
 	dialog didn't work, it looked like someone forgot to add the
 	resources necessary for the new button.  Fixed it.
	
Thu Aug  6 12:09:55 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/helpdata.txt: Added the explore command to the help text.
	
Thu Aug  6 03:27:48 1998  John Stonebraker <ppaqebb@surfshop.net>

	* configure: Updating version number to 1.7.0.  Good show,
 	Mitch. -- Syela
	
Wed Aug  5 20:14:06 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ChangeLog, NEWS: Updating NEWS and ChangeLog - Mitch's unenviable
 	burden -- Syela
	
Wed Aug  5 20:10:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* README, configure.in, client/Freeciv.h, client/connectdlg.c,
 	common/shared.h, data/Freeciv, data/helpdata.txt,
 	debian/civclient.man, debian/civserver.man, debian/copyright,
 	server/gamehand.c: Committing Mitch Davis's patch to update the
 	version number to 1.7.0 and add man files and copyright notice in
 	debian/ -- Syela
	
Wed Aug  5 20:07:25 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/dialogs.c, common/unit.c, common/unit.h,
 	data/helpdata.txt, server/citytools.c, server/cityturn.c,
 	server/gamehand.c, server/unitfunc.c, server/unitfunc.h,
 	server/unithand.c: Committing Kris Bubendorfer's patch to repair
 	spy/diplomat bugs, allow spies to poison cities, and to mung
 	create_unit. -- Syela
	
Wed Aug  5 20:04:39 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/repodlgs.c: Christian Grothoff's patch to display all
 	improvements in trade dialog. -- Syela
	
Wed Aug  5 20:03:48 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gamehand.c: David Pfitzner's patch so early 1.6.4
 	savefiles will load. -- Syela
	
Wed Aug  5 20:03:13 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/unit.c: Jason Merrill's patch so that military units can
 	pillage. -- Syela
	
Wed Aug  5 20:02:19 1998  John Stonebraker <ppaqebb@surfshop.net>

	* CREDITS, README, freeciv_hackers_guide.txt: Correcting typos and
 	grammatical errors in documentation.  Patch supplied by Markus
 	Linnala. -- Syela
	
Wed Aug  5 20:01:28 1998  John Stonebraker <ppaqebb@surfshop.net>

	* data/helpdata.txt: Clarifying help on Hanging Gardens (Greg
 	Wooledge again) -- Syela
	
Wed Aug  5 20:00:08 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/helpdlg.h, client/menu.c, data/helpdata.txt: Adding Greg
 	Wooledge's help on combat. -- Syela
	
Wed Aug  5 19:58:24 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c, server/cityturn.c, server/plrhand.c: Implementing
 	Peter Schaefer's patches to prevent taxes, science, and building
 	upkeep during anarchy. -- Syela
	
Wed Aug  5 19:55:03 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unittools.c: Changing enemies_at to be a little more
 	efficient and less omniscient. -- Syela
	
Wed Aug  5 19:54:33 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/stdinhand.c: Adding funct set_ai_level, and adding and
 	doc'ing normal and hard commands to invoke it. -- Syela
	
Wed Aug  5 19:53:00 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Adding util funct is_wet so that autosettlers
 	won't want to irrigate tiles they have no reason to know are
 	irrigable.  Adding enemies_at check in findwork; this is not nearly
 	adequate to stop settlers from going to their deaths, but is better
 	than nothing. -- Syela
	
Wed Aug  5 19:51:02 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.h: Adding orig_x and orig_y to warmap (still
 	unused) -- Syela
	
Wed Aug  5 19:50:45 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Treating from ocean (presumably ferryboat) to
 	land moves as 3 instead of something bizarre in LAND_MOVING warmap.
  	Averaging outgoing and incoming move costs in LAND_MOVING warmap,
 	since pathological cases led to pathological behavior where the AI
 	thought danger was much farther away than it was.  Adding orig_x
 	and orig_y to warmap, but not implementing them anywhere. -- Syela
	
Wed Aug  5 19:48:15 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Quick hack to stop widespread disorder in AI
 	nations whose Gardens or Oracle become obsolete. -- Syela
	
Wed Aug  5 19:47:19 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/player.h: Adding more ai handicaps, ones I could actually
 	implement, and protoing ai_handicap funct. -- Syela
	
Wed Aug  5 19:44:01 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/player.c: Adding funct ai_handicap. -- Syela
	
Wed Aug  5 19:43:34 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/city.h: Changing grave_danger back to int. -- Syela
	
Wed Aug  5 19:38:36 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Implementing H_HUTS so that normal-mode AI explorers
 	won't move straight to huts on unseen tiles.  Increasing ct in
 	explorer loop (PART TWO) so that fast units explore further.
  	Teaching exploring boats that exploring coastlines is better than
 	exploring open sea.  This is actually important for the normal-mode
 	AI.  Adding could_unit check so that I don't get annoying ZOC
 	violation messages.  Changing unit_vul so that defenders against
 	virtual (id=0) attackers are treated as fully healed.  Restoring
 	the city-kill bonus in findvictim which I inadvertently hosed at
 	some point in the past.  Implementing H_TARGETS so that AI in
 	normal mode won't target anything it hasn't seen.  Altering
 	ai_manage_ferryboat so that ferryboats may explore rather than
 	going home in normal mode. -- Syela
	
Wed Aug  5 19:34:08 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Implementing H_RATES, so the AI in normal mode won't
 	set its rates beyond its government_max_rate. -- Syela
	
Wed Aug  5 19:33:19 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Giving the AI some clue what to do on fallbacks,
 	which seem only to occur with techlevel=0.  Hosing the DOOMED
 	clause, since I hosed grave_danger.  Telling the AI not to spend
 	1000 on battleships for defense anymore; I don't know how well this
 	will work yet, although it seems correct.  Not saving money for
 	B_AQUEDUCT if we only want it because we're celebrating.  Saving
 	money for it hosed the celebration, leading to ridiculous
 	flipflops.  Rewriting worst_elvis_tile, which has been defective
 	for months, but I only noticed last night when I was doing
 	last-minute modifications and Boston decided to have disorder N
 	turns in a row.  Adding resolved/unresolved printf to emergency
 	subroutine. -- Syela
	
Wed Aug  5 19:30:03 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Adding dangerfunct so that danger amortization
 	is 2^(1-t) instead of 1/t^2.  Treating units adjacent to city as 3
 	away instead of whatever the warmap thinks.  Changing grave_danger
 	to an int, but not implementing my master plan yet.  It needs to
 	acknowledge that four veteran dragoons outside a city are more than
 	four times as dangerous as one.  Moving the v/=30 to fix a possible
 	problem where the AI berserkly wants FEUDALISM.  Adding a +=
 	urgency in m_a_c_b so that the AI will buy if danger==def.  Adding
 	emergency-wall code which actually worked when I tried it (once),
 	but isn't necessarily verified yet. -- Syela

Wed Aug  5 19:25:53 1998  John Stonebraker <ppaqebb@surfshop.net>

	* README.AI: Updating AI intro, doc'ing normal and hard modes,
 	updating list of known and recently resolved problems. -- Syela

Tue Aug  4 22:41:17 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unittools.h: Protoing can_unit_attack_unit_at_tile and
 	enemies_at. -- Syela
	
Tue Aug  4 22:40:57 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unittools.c: Changing can_unit_attack_tile into a wrapper
 	for can_unit_attack_unit_at_tile.  Adding enemies_at, which is
 	mostly-working but not dangerous. -- Syela
	
Tue Aug  4 22:40:10 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Fixing dist_nearest call in unit_versus, and
 	adding outside %s as a possible notify.  Correcting spelling of
 	successful.  Adding ACTIVITY_EXPLORE as a special case in
 	handle_unit_ac_req. -- Syela
	
Tue Aug  4 22:38:53 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Fixing bug in get_virtual_defense_power so
 	that ground units on ocean tiles return 0.  Implementing
 	ACTIVITY_EXPLORE in update_unit_ac.  Correcting dist_nearest call
 	in kill_unit and adding 'outside %s' as a possible notification.
  	-- Syela
	
Tue Aug  4 22:36:25 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Fixing ancient bug in ai_do_build_city where
 	punit is freed and then referenced.  Initing ww to 99999 in
 	findwork so that v2=0 activities are not attempted.  Doing ZOC
 	check before settlers try to disembark.  Fixing syntax error in a
 	memset that doesn't matter. -- Syela
	
Tue Aug  4 22:34:22 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.h: Protoing could_unit_move_to_tile so aiunit
 	can call it. -- Syela
	
Tue Aug  4 22:34:02 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Adding arbitrary deterrent for GOTO'ing
 	through unseen tiles.  Tinkering with the passenger in find_the,
 	which probably has no meaning whatsoever.  Adding transport
 	paranoia code, which mostly works thanks to the new util funct
 	enemies_at.  This isn't perfect and if I figure out why I might
 	fix it later today.  Fixing the 'passenger cannot disembark' thing
 	which I messed up so badly the first time I couldn't believe it
 	when I saw it.  Adding passenger to find_a_dir for more transport
 	paranoia.  In find_a_dir, avoiding the unknown if we are on our
 	last move.  Allowing -1 to be returned if moving would be into the
 	jaws of death.  Adding same_pos check in goto_is_sane.  Aborting
 	goto's with no moves_left much sooner than before to save CPU
 	cycles. -- Syela
	
Tue Aug  4 22:28:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* data/tiles.xpm: Adding X tile for ACTIVITY_EXPLORE. -- Syela
	
Tue Aug  4 22:27:07 1998  John Stonebraker <ppaqebb@surfshop.net>

	* data/Freeciv: Adding <Key>x for key_unit_explore. -- Syela
	
Tue Aug  4 22:26:16 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/unit.c: Changing MAGELLAN to give 2 moves, not 1.  Adding
 	ACTIVITY_EXPLORE to can_unit_do_activity. -- Syela
	
Tue Aug  4 22:25:37 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/xmain.c: Adding key_unit_explore. -- Syela
	
Tue Aug  4 22:25:07 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/menu.c: Adding explore to orders menu. -- Syela
	
Tue Aug  4 22:24:38 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/mapview.c: Defining X_TILE and displaying it when units
 	are in explore mode. -- Syela
	
Tue Aug  4 22:23:30 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/mapctrl.c, client/mapctrl.h: Adding and protoing
 	key_unit_explore. -- Syela
	
Tue Aug  4 22:22:59 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/Freeciv.h: Adding <Key>x to put units in explore mode. -- Syela
	
Tue Aug  4 22:21:56 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.h: Protoing a bunch of functs that now may be called
 	from other modules: ai_manage_explorer, unit_belligerence, _basic,
 	unit_vulnerability, _virtual, _quadratic, unit_can_defend. -- Syela
	
Tue Aug  4 22:17:02 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Correcting unit_move_turns now that MAGELLAN
 	actually gives 2 moves.  Deleting obsolete quick'n'dirty
 	unit_defensiveness and replacing it with the much smarter new
 	funct assess_defense_unit.  Hacking ai_manage_explorer so that it
 	can handle non-AI units, including boats.  Changing the arbitrary
 	value in the really slow part so that explorers don't get stuck so
 	easily, and also calling unit_move_turns instead of assuming our
 	explorer was an IGTER ground unit.  Writing quick'n'dirty
 	stack_attack_value because the old bodyguard code didn't
 	acknowledge stacks of muskets as a threat to howitzers.  Rewriting
 	reinforcements_cost and _value to save enormous amounts of CPU
 	time since the last versions were so badly implemented.  Also
 	changing them to continue if aunit==punit, so taking account of
 	that in findvictim.  Upgrading the need-bodyguard calc using
 	stack_attack.  Fixing bugs in gothere that I can't really explain
 	but that which were causing AI invaders to either stall or get
 	stuck for no good reason.  Oops; I still have debug printfs in
 	here; will remove them later today.  Using quadratic defense in
 	look_for_charge and findjob for bodyguards.  Using
 	assess_defense_unit instead of the really bad joke in the
 	is-it-safe-to-leave calculation.  Acknowledging units already
 	present in the horrible init in f_s_t_k.  And I'm not done yet! -- Syela
	
Tue Aug  4 22:09:03 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aitools.c: Fixing ancient mistake in dist_nearest_enemy_city
 	that allowed unseen cities to be returned.  Also hacking it so it
 	gives the nearest city on any continent if (x,y) is in the
 	ocean. -- Syela
	
Tue Aug  4 22:08:05 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Forcing the AI to save up for citywalls/defenders
 	it needs even if it's a good time to love the president. -- Syela
	
Tue Aug  4 22:07:32 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Teaching the AI when to build MAGELLAN.  Also
 	telling it SDI is worth saving money for if it's about to be
 	nuked. -- Syela
	
Tue Aug  4 22:06:28 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.h: Protoing new functs assess_defense_unit and
 	_quadratic. -- Syela
	
Tue Aug  4 22:06:07 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Fixed some bugs giving an implicit *1.5 to
 	boats defending cities.  Wrote assess_defense_quadratic to stop
 	the AI from building piles of small units or from reallocating
 	piles of small units to one city.  Wrote assess_defense_unit.
  	Rewrote assess_defense_backend to handle the new functs.  Fixed a
 	syntax error that caused a memset to misbehave. -- Syela
	
Mon Aug  3 02:27:42 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Fixing bug where giving AI an empire with missiles
 	crashes the game.  Fixing bug where AI warships can choose
 	landlocked targets. -- Syela
	
Sun Aug  2 23:28:37 1998  Mitch Davis <mjd@alphalink.com.au>

	* configure, configure.in, client/Freeciv.h, common/shared.h,
 	data/Freeciv: Bumped all the version numbers to 1.6.6.
	
Sun Aug  2 20:30:59 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unittools.c: Adding unit name to zone of control notify.
  	One of my AI functs is misbehaving re: ZOC, and this is useful to
 	debug it as well as in general. -- Syela
	
Sun Aug  2 20:30:00 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Adding a bunch of ferryboat and bodyguard
 	stuff to handle_unit_move_request. -- Syela
	
Sun Aug  2 20:29:14 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Preventing nukes from reducing size 1 cities
 	to size 0.  I don't know how The Other Game does this, so this
 	might need checked. -- Syela
	
Sun Aug  2 20:27:43 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/stdinhand.c: Adding undoc'd crash command. -- Syela
	
Sun Aug  2 20:26:52 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.h: Protoing other_passengers, changing proto for
 	find_boat. -- Syela
	
Sun Aug  2 20:26:24 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Replacing hardcoded 8 with TRADE_WEIGHTING.
  	I probably have more of these lurking somewhere.  More strongly
 	encouraging coastal cities to be near lots of water instead of
 	only a little.  Adding rather arbitrary deterrent to using
 	settlers to help cities grow.  No longer zeroing ferryboat in
 	auto_settler_do_goto; it's in unithand now.  Changing find_boat so
 	that punit is no longer an arg (we just trust the map), but
 	minimum capacity is.  Adding util funct other_passengers, which
 	I'm probably going to end up obsoleting now that multiple
 	passengers are handled intelligently.  Adding ai_choice to
 	findwork so that AIs will want Navigation if colony sites exist
 	outside trireme range.  Choosing the best tile to improve if
 	multiple tiles offer equal opportunity instead of choosing the
 	NWmost.  Refusing to allow settlers to help cities grow if they
 	can do anything else useful.  Otherwise the AI was settling its
 	settlers, creating workers for unimproved tiles, and then needing
 	settlers to improve them.  Not allowing a settler riding a
 	warferryboat to divert it.  Forcing settlers to disembark early
 	with other_passengers, but this is probaly no longer necessary. -- Syela
	
Sun Aug  2 20:18:13 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Adding time_saving abort in generate_warmap
 	to prevent useless duplication; some of the AI functs would
 	otherwise generate redundant warmaps.  Fixing bug involving dir_ok
 	halfway around the world from the destination.  Acknowledging
 	passenger ZOC in ferryboat goto paths.  Treating rails as free
 	even for IGTER units finally.  Encouraging units to choose
 	roads/rails in find_a_dir for flexibility later. -- Syela
	
Sun Aug  2 20:14:51 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/civserver.c: Forcing the AI to manage its units BEFORE
 	end_turn, not during. -- Syela
	
Sun Aug  2 20:14:00 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Handling e/luxneed/pwr in worker_loop better
 	to stop AI emergencies. -- Syela
	
Sun Aug  2 20:13:17 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/unit.c: Changing is_transporter_with_free space to return
 	free space. -- Syela
	
Sun Aug  2 20:12:37 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/city.h: Adding urgency and who's-killing-us temp vars a
 	and f to city_ai. -- Syela
	
Sun Aug  2 20:11:27 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.h: Protoing new functs look_for_charge and
 	find_beachhead. -- Syela
	
Sun Aug  2 20:07:10 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Reordering functs so that low-level routines come
 	first and high-level routines come later in the file.  Adding util
 	funct unit_move_turns which actually acknowledges MAGELLAN, but I
 	need to implement it a dozen more places.  Adding bodyguard/charge
 	stuff.  Making bodyguards zero their charge if they should change
 	homecity.  Adding unit_vul_virtual.  Changing the desperation
 	kluge so that units don't attack with certain death, although
 	probable death is still OK.  Hacking findvictim to return an int.
  	Hacking findvictim so ferryboats do not attack.  Adding more
 	safeguards to prevent SIGFPE's when non-attackers try to attack.
  	Adding ai_military_bodyguard.  Adding find_beachhead for
 	invasions.  Adding bodyguard code to ai_military_gothere.  Adding
 	invasion code to ai_military_gothere.  Adding util funct
 	unit_can_defend for findjob and new funct look_for_charge.
  	Allowing a lot of defenders to become bodyguards if needed as
 	such.  Calling generate_warmap more than I would like; it seems to
 	slow the game down some.  Adding invasion code to
 	find_something_to_kill.  Using unit_being_aggressive to calc
 	unhap.  Making ai_manage_ferryboat a lot more intelligent
 	regarding multiple passengers and not leaving shore too soon.
  	Maybe something else, but with the rearranging of functs, the
 	diffs are ugly. -- Syela
	
Sun Aug  2 19:57:40 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Moving ai_manage_units out of ai_do_last so that
 	units can have their final move before enemy cities get to build
 	stuff.  Fixing stupidity in ai_manage_taxes where it was possible
 	to feed a negative index to an array - was causing aberrant
 	behavior, mostly selling buildings during pointless celebrations.
  	Getting rid of some unused code.  Being a little more careful not
 	to sell stuff because of rounding errors.  There is a minor quirk
 	in this routine that I still need to fix, but I wanted to upload
 	it in a mostly-working state. -- Syela
	
Sun Aug  2 19:54:19 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.h: Protoing ai_choose_defender_by_type and changing
 	proto for ai_choose_defender_limited to match. -- Syela
	
Sun Aug  2 19:53:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: AI not buying wonders with have 50 or more
 	build_points_left.  Changing the syntax to
 	ai_choose_defender_limited so that move_type can be an arg.
  	Adding ai_choose_defender_by_type.  Disbanding unhappy units that
 	cause unrest in emergency_r_w. -- Syela
	
Sun Aug  2 19:50:44 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Regarding only ground units and ferryboats as
 	grave or urgent danger.  Fixing huge, important, obvious bug where
 	the AI didn't comprehend that units on other continents were
 	dangerous.  Caching urgency so that defenders in urgency-0 cities
 	can become bodyguards.  Changing the big ugly want equation in
 	p_a_w and k_s_w to handle co-ordinated attacks and invasions via
 	ferryboat.  Adding code to m_a_c_b so that the AI might (it very
 	rarely does, it seems) build defenders purely to become
 	bodyguards.  I think that's everything. -- Syela
	
Sun Aug  2 19:39:17 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Giving the AI appropriate disregard for the
 	WALL. -- Syela
	
Sun Aug  2 15:34:46 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, client/helpdlg.c, data/Freeciv: Vision range
 	displayed in the unit help, from David Pfitzner.
	
Wed Jul 29 21:39:19 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Unlinking returning spy from tile->units
 	before sending her home, then inserting her in her new
 	tile->units.  Also stalling AI military ground units on GOTO,
 	which is meaningless now but will be useful when I upload the
 	current aiunit.c. -- Syela
	
Wed Jul 29 16:22:42 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/dialogs.c, client/dialogs.h, client/packhand.c,
 	common/packets.c, common/packets.h, server/unitfunc.c,
 	server/unithand.c: Used the same system I did for revolt inciting
 	to remove the bribe cost from the unit info packet.  Only had to
 	modify 7 files this time.
	
Wed Jul 29 16:11:09 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/unit.h, server/plrhand.c: Removed unit_bribe_cost() from
 	the unit.h header, because it isn't in unit.c any more.  Added the
 	unittools.h header to plrhand.c.
	
Wed Jul 29 13:30:03 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/civclient.c, client/dialogs.c, client/dialogs.h,
 	client/packhand.c, client/packhand.h, common/packets.c,
 	common/packets.h, server/cityhand.c, server/civserver.c,
 	server/unithand.c, server/unithand.h: Took the incite_revolt_cost
 	out of the city_info packet.  Sounds simple, eh?  I needed to
 	modify 11 files to do it.  Since inciting happens only rarely,
 	it's wasteful to send the data with every city update.  Now when a
 	diplomat tries to incite, a INCITE_INQ packet is sent asking how
 	much it will cost.  Then the client receives an INCITE_COST packet
 	from the server, and pops up the yes/no dialog.  If players with
 	lagged connections try to incite more than one city very quickly
 	(before the server INCITE_COST comes back), weird things might
 	happen.  I doubt this will actually happen in a game.  This change
 	also allows incite cost to be updated dynamically.  Before the
 	cost was computed at the beginning of the turn and didn't change.
  	Now if you do something to change the cost, like kill all the
 	units in the city and reduce its size, the cost will go down.
	
Wed Jul 29 01:18:07 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Removing destroyed cities from the minimap.
 	-- Syela
	
Wed Jul 29 01:14:25 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Removing cities that starve from the
 	minimap. -- Syela
	
Wed Jul 29 01:13:22 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityhand.c: Removing brokenly-implemented
 	remove_city_from_minimap from remove_city; it was corrupting the
 	minimap.  Forcing reset_move_costs in remove_city and create_city.
  	My stupid failure to do so earlier led to the AI's reluctance to
 	build boats. -- Syela
	
Tue Jul 28 23:04:53 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/unit.c: Adding is_ground_unit check in
 	get_transporter_capacity (David Pfitzner) Adding case for
 	unimplemented ACTIVITY_EXPLORE in unit_activity_text, and added
 	the unknown punit->activity in the LOG_FATAL.  -- Syela
	
Tue Jul 28 23:01:54 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Fixing ai_find_elvis_pos so that it doesn't panic
 	about anticipated famine when dealing with e large.  Horrible
 	mistake on my part. -- Syela
	
Tue Jul 28 22:59:13 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c, server/cityturn.h: Protoing
 	unit_being_aggressive normally so the AI can call it. -- Syela
	
Tue Jul 28 22:58:33 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gamehand.c: Including capability.h; stops implicit
 	declaration warnings. -- Syela
	
Tue Jul 28 22:55:19 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/packets.c: Fix so negative research.researched is
 	acknowledged as negative. -- Syela
	
Tue Jul 28 14:30:51 1998  Mitch Davis <mjd@alphalink.com.au>

	* NEWS, configure, configure.in, client/Freeciv.h,
 	common/shared.h, data/Freeciv: Upped the version number to 1.6.5.
	
Tue Jul 28 12:40:49 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/citydlg.c, client/packhand.c, common/city.c,
 	common/city.h, common/packets.c, common/packets.h,
 	server/cityhand.c, server/cityturn.c, server/plrhand.c: Changed
 	the way trade route value was calculated.  The value of a trade
 	route no longer takes the trade produced by other trade routes
 	into account.  Before it would sometimes depending on which order
 	the routes were computed in.  The value of the trade route is sent
 	with the CITY_INFO packet to the client.  The client uses this
 	information rather than trying to compute the value isself, since
 	it doesn't know enough to get it right.  The format for the
 	CITY_INFO packet has been shrunk by 6-14 bytes.
	
Tue Jul 28 12:37:41 1998  Mitch Davis <mjd@alphalink.com.au>

	* Makefile.am, Makefile.in, client/Makefile.am,
 	client/Makefile.in, server/Makefile.am, server/Makefile.in: Fixing
 	the broken makefiles that didn't export many files (including
 	server/gotohand.h and client/*.ico).  This is what broke beta
 	1.6.4.
	
Tue Jul 28 12:15:12 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unithand.c: Cities weren't being refreshed when a trade
 	route was formed.  The update for the destination city might not
 	get sent to the right player.  Fixed.
	
Tue Jul 28 09:49:52 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/helpdata.txt: Some updates to unit help by David Pfitzner.
	
Mon Jul 27 17:39:24 1998  not sure

	* common/packets.c: Reverting to revision 1.12, since 1.13 did
 	nothing but add bugs.
	
Mon Jul 27 17:25:33 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/civserver.c: Changed the estimated release date from Jul
 	26 to Aug 5.
	
Mon Jul 27 17:24:38 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/Freeciv.h, data/Freeciv: Changed the estimated release
 	date for 1.7 from July 26 to August 5.
	
Mon Jul 27 17:23:12 1998  Mitch Davis <mjd@alphalink.com.au>

	* README: Updated file for 1.7.  Thanks to James Blackwell for the
 	patch.
	
Mon Jul 27 17:21:57 1998  Mitch Davis <mjd@alphalink.com.au>

	* NEWS: Removed mention of an irrigation problem which John
 	assures me has gone.
	
Mon Jul 27 17:21:05 1998  Mitch Davis <mjd@alphalink.com.au>

	* Makefile.noimake: Added a note telling people that the file is
 	out of date.
	
Mon Jul 27 17:20:27 1998  Mitch Davis <mjd@alphalink.com.au>

	* INSTALL: Updated the INSTALL document so it tells people to use
 	configure instead of Imake.
	
Mon Jul 27 17:19:33 1998  Mitch Davis <mjd@alphalink.com.au>

	* HOWTOPLAY: Replaced references to 1.6 with Freeciv.
	
Mon Jul 27 17:18:30 1998  not sure

	* ChangeLog: Made a start on the ChangeLog.  Need to finish this
 	for 1.7.
	
Mon Jul 27 17:00:32 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/packets.c: Removing casting to signed in get_int8; hosed
 	pinfo->activity. -- Syela
	
Mon Jul 27 16:25:33 1998  Mitch Davis <mjd@alphalink.com.au>

	* CREDITS, NEWS: Updated for 1.7.  Thanks to James Blackwell
 	<innocent@mercury.merconline.com> for the changes.
	
Mon Jul 27 16:01:37 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/plrhand.c: Removed some code I had commented out ages
 	ago.
	
Mon Jul 27 15:25:51 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/cityturn.c: Added code so that units in fortresses within
 	a 3-square radius of a city do not cause unhappiness.  Patch
 	submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Mon Jul 27 15:17:53 1998  Mitch Davis <mjd@alphalink.com.au>

	* data/helpdata.txt: Updated the help file to include the feature
 	where units in fortresses around cities do not cause unhappiness.
  	This allows for much more realistic defense scenarios.  Patch
 	submitted by Greg Wooledge <wooledge@kellnet.com>.
	
Mon Jul 27 15:10:48 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/game.c, common/game.h: Added a "get_player" convenience
 	function.  Patch submitted by David Pfitzner <dwp@mso.anu.edu.au>.
	
Mon Jul 27 15:03:34 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/Freeciv.h, server/plrhand.c: The rate-changing code has a
 	really stupid bug in it..*sigh* The notify_player call is missing
 	it's last arg in handle_player_rates
	[it should be get_government_name(pplayer->government)] Fix
 	submitted by Olli Helenius <ollhel@jytol.fi>.
	
Mon Jul 27 14:29:06 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/ratesdlg.c, common/player.c, common/player.h,
 	data/Freeciv, server/plrhand.c: Made the tax/lux/sci rates work
 	like in CivII.  Patch submitted by Olli Helenius
 	<ollhel@jytol.fi>.
	
Mon Jul 27 14:24:56 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/gamehand.c: Rewrote the savefile version patch to use
 	capability strings instead of simple version number.  Patch
 	submitted by Cedric Tefft <cedric@earthling.net>.
	
Mon Jul 27 12:36:40 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/packets.c: Fixes a problem where cities with lack of food
 	or so are shown to have 65k food surplus.  Patch submitted by
 	Frank Muzzulini <muzz@albatross.pond.sub.org>.
	
Mon Jul 27 12:20:49 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/menu.c, data/helpdata.txt, client/helpdlg.h: Patches from
 	Greg Wooledge to add lots of help text for governments and
 	happiness.
	
Mon Jul 27 05:15:33 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/unit.c: Changed Partisans to ignore terrain, like in
 	civ2.
	
Mon Jul 27 01:11:44 1998  John Stonebraker <ppaqebb@surfshop.net>

	* README.AI: Adding short doc describing current AI status to
 	top-level dir. -- Syela
	
Mon Jul 27 01:09:25 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.h: Protoing find_boat, since invasion code will
 	call it. -- Syela
	
Mon Jul 27 01:06:43 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c, ai/aicity.c, ai/aicity.h: Moving
 	choose-ferryboat code into ai_choose_ferryboat. -- Syela
	
Mon Jul 27 01:04:10 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Fixing bug so galleons can GOTO defended
 	tiles.  Setting unit activity to ACTIVITY_GOTO in do_unit_goto as
 	a failsafe. -- Syela
	
Mon Jul 27 01:02:35 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/unit.h: Adding ACTIVITY_EXPLORE, which I'll implement
 	Real Soon Now. -- Syela
	
Mon Jul 27 01:02:00 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/civserver.c: David Pfitzner's patch to announce when
 	game-load is complete. -- Syela
	
Mon Jul 27 00:07:59 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Moving debug printfs that were calling free()d
 	memory -- Syela
	
Mon Jul 27 00:05:52 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/civclient.c: David Pfitzner's patch to stop client
 	crashes on reconnection. -- Syela
	
Sat Jul 25 16:47:30 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Adding 'e' to better estimate real foodneed
 	when elvisization is inevitable.  This is a quick-n-dirty hack but
 	it works well.  Zeroing specialists prior to worker_loop in
 	auto_arrange_workers. -- Syela
	
Sat Jul 25 16:45:58 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Fixing mistaken implementation of settler_eats
 	(months old) in ai_find_elvis_pos.  Adding 'e' to handle
 	multiple-elvis case so that it doesn't elvisize all its farmers
 	and starve.  Fixing what was probably a typo in ai_fix_unhappy;
 	doing so fixed a bug with emergency_reallocate.  Made the
 	emergency notification more verbose and got rid of all the other
 	printfs in reallocate once I fixed the remaining bugs; the
 	city_refresh turned out to be important. -- Syela
	
Fri Jul 24 20:49:58 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Fixing a dorky typo of mine in g_v_d_p that
 	David Pfitzner found. -- Syela
	
Fri Jul 24 20:49:21 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Commenting out debug printfs in ferryboat
 	code now that it's tested.  Using seacost instead of dopey
 	real_map_distance to calculate distances to possible colony sites.
  	Letting settlers ride the boat all the way to their destination
 	instead of getting off too soon. -- Syela
	
Fri Jul 24 20:47:48 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/plrhand.c: Fixing bug where last available tech was
 	called 'Future Tech 1'. -- Syela
	
Fri Jul 24 20:46:51 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.h: Protoing really_generate_warmap since
 	findwork now calls it. -- Syela
	
Fri Jul 24 20:46:29 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Better pathfinding for Triremes.
  	Experimental patch to the stacking algorithm so that stacks in
 	cities and fortresses are OK. -- Syela
	
Fri Jul 24 20:45:25 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Fixing a really stupid typo in worker_loop
 	that hosed conflict[] -- Syela
	
Fri Jul 24 20:44:56 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/citytools.c: Fixing a bug in city_tile_value that allowed
 	nonsupport of units. -- Syela
	
Fri Jul 24 20:43:54 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.h: Redefining find_something_to_kill as an int instead
 	of void funct. -- Syela
	
Fri Jul 24 20:43:28 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Allowing certain units to be managed with 0 moves
 	left.  Fixes the wasted turn for caravans and lets ferryboats stop
 	their GOTOs when their passengers disembark.  Rewrote the
 	unit_belli and unit_vul stuff, reinf_value,
 	find_something_to_kill, and findvictim in order to make attacker
 	wants somewhat reasonable instead of craven. -- Syela
	
Fri Jul 24 20:41:21 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Doing funky stuff in ai_manage_taxes to prevent
 	famine, disorder, and non-support of units. -- Syela
	
Fri Jul 24 20:39:48 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.h: Protoing new functs has_a_normal_def and
 	emergency_realloc_workers. -- Syela
	
Fri Jul 24 20:37:40 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Spending money wantonly when researching A_NONE.
  	Fixing isdef in choose_defender_limited so cruisers don't count as
 	defenders.  Adding emergency_reallocate_workers; not fully tested
 	yet. -- Syela
	
Fri Jul 24 20:36:00 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Only treating ground units and ferryboats as
 	grave or urgent danger.  Not allowing FIELDUNIT as first defender
 	in a city.  Changing unit attack desires; old ones were right at
 	the THRESHOLD, but too low for closer targets.  Fixing a dorky
 	typo that only survived because memsetting the virtualunit didn't
 	set its id to 0.  Zeroing it manually.  Treating FIELDUNITs in a
 	city as attackers, like Cannons are. -- Syela
	
Fri Jul 24 20:33:09 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Better pollution understanding.  Fixing want
 	for CAPITAL and DARWIN. -- Syela
	
Thu Jul 23 22:51:24 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/Freeciv.h, client/connectdlg.c, client/graphics.c,
 	client/graphics.h, common/shared.h, data/Freeciv,
 	server/civserver.c, server/meta.h: Made some changes so that
 	versions before 1.7 display a prominent BETA notice.
	
Thu Jul 23 22:48:47 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/shared.h: Added some notes for people updating the
 	capability string.
	
Thu Jul 23 00:54:23 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Moving the warmth calculation where it should
 	have been in the first place.  Expanding settling horizon after we
 	learn Nav. -- Syela
	
Thu Jul 23 00:52:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/citytools.h: Defining POLLUTION_WEIGHTING and
 	WARMING_FACTOR.  -- Syela
	
Thu Jul 23 00:51:43 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Zeroing tech_want for buildings under primitive
 	governments.  Trying to stop the AI from using FIELDUNITS as
 	sentry defenders. -- Syela
	
Thu Jul 23 00:49:54 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Correcting stupid mistakes, one involving
 	B_MASS, two others that were preventing the AI from building
 	caravans and freight. -- Syela
	
Wed Jul 22 23:08:15 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/cityturn.c: This patch prevents advisors from building
 	palaces automatically.  Patch submitted by Olli Helenius
 	<ollhel@jytol.fi>.
	
Wed Jul 22 23:05:24 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/plrhand.c: Some formatting changes.  Hope I didn't break
 	anything.
	
Wed Jul 22 22:59:13 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/plrhand.c: This patch fixes a problem with anarchy.
  	Patch supplied by Peter Schaefer
 	<schaefer@malaga.math.uni-augsburg.de>.
	
Wed Jul 22 22:57:28 1998  not sure

	* ai/Makefile.in, client/Makefile.in, server/Makefile.in: Grr,
 	some makefile changes eluded me.
	
Wed Jul 22 18:42:25 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c, ai/advmilitary.c, ai/aicity.c, ai/aihand.c,
 	ai/aitools.c, ai/aiunit.c, server/cityturn.c, server/settlers.c,
 	common/player.h: Fixing a bunch of bugs involving AI behavior with
 	pyramids.  Dealing with simulataneous construction of wonders on
 	different continents better, and eliminating surplus caravans.
  	Instituting warmth variable and primitive pollution-awareness.
  	The pollution stuff isn't adequately tested yet. -- Syela
	
Wed Jul 22 18:38:19 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/plrhand.c, client/finddlg.c, client/gotodlg.c,
 	client/repodlgs.c: Casting the fourth arg of qsort as (void *) for
 	-Wall. -- Syela
	
Wed Jul 22 13:03:28 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/mapview.c: Some typos that would effect non-square tiles
 	fixed.
	
Wed Jul 22 00:15:06 1998  Mitch Davis <mjd@alphalink.com.au>

	* Makefile.in, configure, common/Makefile.in, data/Makefile.in,
 	server/Makefile.in: Regenerated some Makefiles, after Greg's
 	changes and unchanges.
	
Wed Jul 22 00:09:29 1998  Mitch Davis <mjd@alphalink.com.au>

	* ai/Makefile.am, common/Makefile.am: Reversed some of Greg's
 	changes, since some people had problems.
	
Mon Jul 20 23:03:09 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Properly indenting and bugfixing
 	diplomat_leave_city. -- Syela
	
Mon Jul 20 22:42:50 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/helpdlg.h, client/menu.c, data/helpdata.txt: 

	- adds some basic help for terrain types
 	- adds boat carrying capacities to the help text 
	- fixes some other bugs in the help system (most importantly,
 	  clicking "About" didn't find the right section, since
 	  the helpdata.txt file said "About Freeciv") 
	Patch supplied by Greg Wooledge <wooledge@kellnet.com>.
	
Mon Jul 20 22:41:31 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c, server/gotohand.c, server/settlers.c: Dealing with
 	ferryboat gotos more intelligently. -- Syela
	
Mon Jul 20 22:39:40 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/player.c, common/player.h, server/plrhand.c: Adding
 	framework for handicapping the AI; not yet implemented. -- Syela
	
Mon Jul 20 22:35:10 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/packhand.c: Forcing government dialog popup when an AI
 	nation with out-of-range
	(Flag) value for ->revolution is given human control. -- Syela
	
Mon Jul 20 22:31:00 1998  Mitch Davis <mjd@alphalink.com.au>

	* configure.in, ai/Makefile.am, client/Makefile.am,
 	common/Makefile.am: Some improvements from Reinier Post
 	<reinpost@win.tue.nl>.  I haven't had time to test them.
	
Mon Jul 20 22:25:02 1998  Mitch Davis <mjd@alphalink.com.au>

	* Imakefile: Added server/settlers.o.  Reported by Reinier Post
 	<reinpost@win.tue.nl>.
	
Mon Jul 20 22:17:49 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/unitfunc.c: Fixed two problems.  The first was a bug I
 	introduced by incorrectly joining two ifs.  Naughty me.  The
 	second is regarding the behaviour of a spy when she's returned to
 	her home city.  From a patch submitted by Kris Bubendorfer
 	<Kris.Bubendorfer@MCS.VUW.AC.NZ>.
	
Mon Jul 20 20:20:57 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Using minimap to handle conflicts in
 	worker_loop; small win. -- Syela
	
Mon Jul 20 20:06:22 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/plrhand.c: Removing removed player's cities from the
 	citycache. -- Syela
	
Mon Jul 20 20:04:10 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Using add_adjust instead of auto_arr in
 	manage_taxes. -- Syela
	
Mon Jul 20 19:57:48 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c, ai/aicity.c, common/city.h, server/settlers.c,
 	server/settlers.h: Contemplating settlers with a fresh warmap to
 	save CPU time. -- Syela
	
Mon Jul 20 14:34:12 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityhand.c, server/cityhand.h, server/unitfunc.c: Updated
 	city maps and sent out city info packets for nearby cities when
 	another city adjusts its workers.  Also updated city map when a
 	city is captured.
	
Mon Jul 20 14:28:45 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/city.h: Removed (incorrect) prototype for non-existant
 	function.
	
Mon Jul 20 14:27:57 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unittools.c, server/unittools.h: Removed
 	is_sailing_unit_tile because it's no longer needed.  Corrected ZOC
 	so that cities block units, even if the city is empty.
	
Mon Jul 20 12:08:44 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityhand.c, server/settlers.c, server/settlers.h,
 	server/unitfunc.c, server/unithand.c: Initializing infrastructure
 	cache when a city is created, stolen, or conquered.  Despite my
 	-Wall -Werror, yesterday's version was calling uninitialized
 	variables. -- Syela
	
Mon Jul 20 00:11:45 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Fixing the Teflon Diplomat bug (Greg
 	Wooledge's patch) -- Syela
	
Sun Jul 19 23:54:41 1998  not sure

	* NEWS, configure, configure.in, ai/advdomestic.c,
 	ai/advmilitary.c, ai/aicity.c, ai/aihand.c, ai/aitech.c,
 	ai/aitools.c, ai/aiunit.c, client/Freeciv.h, client/civclient.h,
 	client/climisc.c, common/city.c, common/city.h, common/game.c,
 	common/map.h, common/shared.h, data/Freeciv, server/cityhand.c,
 	server/cityhand.h, server/citytools.c, server/cityturn.c,
 	server/cityturn.h, server/civserver.c, server/diplhand.c,
 	server/gotohand.c, server/gotohand.h, server/plrhand.c,
 	server/plrhand.h, server/sernet.c, server/settlers.c,
 	server/settlers.h, server/unitfunc.c, server/unithand.c,
 	server/unithand.h, server/unittools.c:

	Implementing city cache and ai_calc cache in the city_ai struct.
  	This gives a fivefold CPU savings in the benchmark at 800-600 BC,
 	and should be even more necessary later in games.  Deleting old
 	find_city_by_id, but leaving it proto'd in city.h.  Adding new
 	cache-based find_city_by_id to cityhand, and forcing the client to
 	use game_find_city_by_id instead since it's the same as the old
 	one.
	
	In order to make sure I hadn't broken anything, I compiled with
 	-Wall -Werror, and in order to do so, I had to proto a bunch of
 	functs and eliminate unused variables in most of the files I'm
 	committing.  My own sloppiness is to blame for most of that.
	
	Fixing typo in city_affected_by_wonder (broke B_WOMENS).
	Fixing ZOC bug in is_sailing_unit_tile.
	
	Updating version number to 1.6.4.
	
Fri Jul 17 12:50:14 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c: Lots of cool stuff involving settlers and
 	ferryboats. -- Syela
	
Fri Jul 17 12:48:36 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Fixing my fix to lost Triremes.  Zeroing new
 	unit_ai variables on unit mallocation. -- Syela
	
Fri Jul 17 12:47:41 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/plrhand.c: Zeroing new unit_ai variables on unit load. -- Syela
	
Fri Jul 17 12:46:48 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Fixing bug so shipboard units can GOTO land.
  	Allowing ships to GOTO shore, for shore bombardments and
 	transports, etc.  Fixing dorky typo that hosed GOTO's across the
 	international date line.  Dissuading TRIREMEs from GOTO across
 	open sea.  Modularizing goto_is_sane.  -- Syela
	
Fri Jul 17 12:43:27 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/unit.h: Adding basics of unit co-operation code to
 	unit_ai struct. -- Syela
	
Fri Jul 17 12:42:55 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Learning how to manage ferryboats. -- Syela
	
Fri Jul 17 12:42:29 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Learning how to want transports. -- Syela
	
Thu Jul 16 22:35:41 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unithand.c: Quick hack to prevent settlers from building
 	cities when they have zero moves left.
	
Wed Jul 15 23:51:37 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/dialogs.c, client/dialogs.h, client/mapview.c,
 	client/xmain.c: Changed the main screen so that all three of the
 	science, luxury and tax rates are shown.  Also, it is now possible
 	to click on them to change them: Clicking on one area reduces
 	spending in that area by 10%.  This patch was supplied by Peter
 	Schaefer <schaefer@malaga.math.uni-augsburg.de>
	
Wed Jul 15 09:38:35 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/citytools.c: Acknowledging tax_bonus affects luxury in
 	city_tile_value. -- Syela
	
Wed Jul 15 09:36:29 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Fixing a typo that stopped the AI from using lux
 	rate to stop disorder. -- Syela
	
Wed Jul 15 08:41:16 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/Makefile.am, server/Makefile.in: Telling make to compile
 	settlers.c.  Pardon me if I messed this up. -- Syela
	
Wed Jul 15 08:40:21 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/settlers.c, server/settlers.h: Consolidating auto-settler
 	code in its own module for my sanity. -- Syela
	
Wed Jul 15 08:35:01 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c, ai/aiunit.h, server/unitfunc.c, server/unitfunc.h,
 	server/unittools.c, server/unittools.h: Moving all the
 	auto-settler stuff into settlers.c.  Unitfunc was getting too big,
 	and I had the subroutines strewn everywhere. -- Syela
	
Wed Jul 15 07:08:53 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c, ai/aiunit.h, server/cityhand.c, server/civserver.c,
 	server/plrhand.c, server/unitfunc.c: Ignoring corruption in
 	city_des; caching results in the minimap.  Enormous CPU savings,
 	minor cost in memory. -- Syela
	
Wed Jul 15 06:59:17 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Taking obsolete junk out of
 	advisor_choose_build; it was causing stupidity when
 	ai_advisor_choose_building liked CAPITAL. -- Syela
	
Tue Jul 14 16:33:07 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/unitfunc.c: A small correction to Kris' previous patch.
	
Tue Jul 14 16:22:32 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/game.c, common/game.h, common/map.h, server/citytools.c,
 	server/citytools.h, server/stdinhand.c, server/unitfunc.c,
 	server/unitfunc.h, server/unithand.c: This change set concerns
 	spies and diplomats, making them operate more in line with Civ II.
  	That is, spies may survive a mission, and units in a bought city
 	are transferred to the new owner etc.  Multiple bugs in the code
 	in this area were also fixed.
	
	1.  Numerous bug fixes of sabotage/steal code, where messages
	    were being sent incorrectly.
	
	2.  Cities were not being razed correctly in diplomat_incite.
	    Now they aren't razed, as per Civ II.
	
	3.  get_a_tech is now called in incite as well as in
	    unit_enter_city.  After all, buying a city should give you
	    the same opportunity to `discover' new technology as
	    invading the city does.
	
	4.  All units (military and non military) are now transferred to
	    the player who purchased the city.  Units outside of the
	    city are either deleted, or if in another city, are assigned
	    that city as their homecity.
	
	    This also cures the current bug, where a unit in a bought
	    city that has a different homecity, remains in the bought
	    city - even though it is now owned by the purchaser.  Thus
	    the enemy can simply move out and back in - recapturing the
	    newly bought city.
	
	5.  A diplomat now has a chance (ala Civ II) of defeating
	    defending diplomat/spy units in a city.  This chance is set
	    via the set diplchance command from the server console.  It
	    defaults to a 1/3 chance of the attacking diplomat/spy
	    killing each defending diplomat/spy.
	
	6.  Spies (not diplomats) may now survive their mission (ala Civ
	    II).  The chance that a spy will be returned to it's home
	    city is also 1/diplchance.  This increases the value of
	    spies over diplomats.
	
	Patch supplied by Kris Bubendorfer
	<Kris.Bubendorfer@MCS.VUW.AC.NZ>.
	
Tue Jul 14 15:25:15 1998  Mitch Davis <mjd@alphalink.com.au>

	* data/helpdata.txt: Updated errors in some of the entries.  Patch
 	submitted by Frank Muzzulini <muzz@albatross.pond.sub.org>.
	
Tue Jul 14 14:44:18 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/xmain.c: Added a workaround for if getpwuid returns NULL.
  	Problem reported by Peter Joachim Unold <pjunold@daimi.aau.dk> and
 	Peter Schaefer <schaefer@malaga.math.uni-augsburg.de>.  Patch
 	supplied by the second Peter.
	
Tue Jul 14 03:48:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c, ai/advmilitary.c, ai/aicity.c, ai/aihand.c,
 	ai/aiunit.c, server/cityhand.h, server/citytools.c,
 	server/citytools.h, server/gotohand.c, server/unitfunc.c:
 	Eliminating lots of unnecessary divisions in functions I've
 	written. -- Syela
	
Tue Jul 14 03:43:16 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/Freeciv.h: Proto for my refresh widget; didn't think this
 	should be uploaded. -- Syela
	
Mon Jul 13 22:41:53 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Fixing possible overflow in amortize.  I ran this
 	function millions of times without ever seeing it, but I just
 	found the problem. -- Syela
	
Mon Jul 13 11:44:04 1998  John Stonebraker <ppaqebb@surfshop.net>

	* data/Freeciv, client/repodlgs.c, common/packets.c,
 	common/packets.h, server/cityhand.c, server/cityhand.h,
 	server/cityturn.c, server/civserver.c: Adding Refresh button to
 	city report.  Why must this span eight modules? -- Syela
	
Sun Jul 12 23:50:33 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Quick fix for empires with zero trade and
 	disorderly cities. -- Syela
	
Sun Jul 12 06:54:09 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/packets.c: Fixing a typo of Trent's regarding negative
 	shield surplus. -- Syela
	
Sun Jul 12 05:48:17 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Removing debug output.  Making preemption of
 	impossible GOTOs less draconian, more intelligent, and more
 	comprehensiv. -- Syela
	
Sun Jul 12 04:19:22 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Making the AI more willing to buy walls (and
 	coastal/SAM/SDI) -- Syela
	
Sun Jul 12 04:18:06 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aitech.c: Removing debug output for AI changing tech and
 	goal. -- Syela
	
Sat Jul 11 23:45:34 1998  Mitch Davis <mjd@alphalink.com.au>

	* Imakefile: Oops, forgot to add capability.o to the Imakefile.
  	Bug reported by Frank Muzzulini <muzz@albatross.pond.sub.org>
	
Sat Jul 11 09:08:16 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/packets.c: Fixed a few bugs I introduced when I shrunk
 	the protocol.
	
Fri Jul 10 22:35:17 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Calling ai_eval_bu for human cities in
 	advisor_choose. -- Syela
	
Fri Jul 10 22:30:31 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Adding want = TRADE_WEIGHT * 100 /
 	SHIELD_WEIGHT for CAPITAL. -- Syela
	
Fri Jul 10 22:29:40 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Allowing ground units to GOTO adjacent tiles
 	even if one is land and one is ocean.  -- Syela
	
Fri Jul 10 05:06:27 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Old goto stuff buried.  Warmaps moved in.
  	New warmap-based GOTO routines in and working AFAICT.  There was
 	an infinite-loop-RR bug but I'm 99% sure it's finally gone now.
  	-- Syela
	
Fri Jul 10 03:49:28 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.h: Adding gotohand.h to handle defn's and protos
 	for GOTO. -- Syela
	
Fri Jul 10 03:46:32 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c, ai/advmilitary.h: Moving warmap stuff into
 	gotohand.c, .h. -- Syela
	
Fri Jul 10 03:34:23 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Including gotohand.h, removing
 	now-unnecessary protos. -- Syela
	
Fri Jul 10 03:25:06 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/map.c: Standardizing ii[] and jj[] arrays so I don't get
 	confused. -- Syela
	
Fri Jul 10 03:22:25 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Including gotohand.h since I moved the warmaps.
  	Standardizing ii[] and jj[] arrays so I don't get confused
 	again. -- Syela
	
Fri Jul 10 03:10:26 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Changing int which to enum unit_move_type. -- Syela
	
Fri Jul 10 03:04:54 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Limiting domestic want to 199; allows better
 	saving for defense. -- Syela
	
Thu Jul  9 15:59:35 1998  Mitch Davis <mjd@alphalink.com.au>

	* .cvsignore, ai/.cvsignore, client/.cvsignore, common/.cvsignore,
 	data/.cvsignore, server/.cvsignore: Added a line to .cvsignore so
 	the .deps directory is ignored.
	
Thu Jul  9 15:58:31 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/civserver.c: If you try to select your race and choose
 	the player name that you initially connected to the server with,
 	you erroneously get the "Another player has already joined..."
 	notice.  The server doesn't realize that the "other" player IS
 	you.  Patch submitted by Cedric Tefft <cedric@earthling.net>.
	
Thu Jul  9 15:39:42 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/Makefile.am, common/Makefile.in, common/capability.c,
 	common/capability.h, common/packets.c, common/packets.h,
 	common/shared.h, client/civclient.c, client/clinet.c,
 	client/packhand.c, client/packhand.h, client/xmain.c,
 	server/civserver.c: Added support for capability checking between
 	the client and the server.  This should solve any future problems
 	with detecting whether the protocol of the client and server are
 	compatible, without the nebulous practise of incrementing version
 	numbers.
	
Thu Jul  9 07:11:58 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/civserver.c, server/civserver.h, server/maphand.c,
 	server/plrhand.c, server/unithand.c, client/civclient.c,
 	client/mapctrl.c, client/packhand.c, common/game.c,
 	common/packets.c, common/packets.h: Massive changes to protocol.
  	The bandwidth used is about a quarter of what it was.  Also does
 	more buffering to reduce the number of packets sent.
	
Wed Jul  8 08:53:14 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c, server/unittools.c: Going back to new
 	is_already_assigned.  Adding unit_list_iterates so it can handle
 	multiple units on the same tile.  Assigning virtualunits so that
 	the AI no longer builds many engineers to handle a single job.
  	Fixing bugs re: cities and re: mines in ai_calc_irrigate. -- Syela
	
Tue Jul  7 21:18:13 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c, server/unittools.c: Hacking ai_calc_railroad
 	to handle benefit of railroad on forest/mine tiles without roads;
 	related patch to auto_settler_findwork. -- Syela
	
Tue Jul  7 21:16:22 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/packhand.c: Committing fix to possible client crash
 	related to aifill. -- Syela
	
Tue Jul  7 21:15:00 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Adding quick-n-dirty immigration routine to
 	city_desirability. -- Syela
	
Tue Jul  7 21:13:45 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Adding danger5 to deal with SDI; not adding to
 	danger for nuclears; Not wanting attackers with 0 attack (stops
 	SIGFPE's). -- Syela
	
Tue Jul  7 21:12:16 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Adding tech_want for Electricity if we have
 	colosseums and for Theology if we have Cathedrals -- Syela
	
Tue Jul  7 14:35:38 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/shared.c: A small change which allows for the compilation
 	of Freeciv under GNU-Win32.  We really should put something in the
 	autoconfigure stuff...  Patch supplied by Sam Holden
 	<sholden@pgrad.cs.usyd.edu.au>.
	
Tue Jul  7 06:53:12 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/shared.h: fixed typo in previous patch that kept it from
 	compiling.
	
Mon Jul  6 18:10:33 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/city.c: Added some more names for American cities.  Patch
 	submitted by Jake Kesinger <kesinger@math.ttu.edu>.
	
Mon Jul  6 17:35:12 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/menu.c: This patch fixes a problem where the Auto Settler
 	and Build Road options on the Options Menu were permanently greyed
 	out.  Problem found and patch submitted by Cedric Tefft
 	<cedric@earthling.net>.
	
Mon Jul  6 17:32:27 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/civserver.c: Patch to prevent two people connecting to
 	the server and using the same name.  Patch submitted by Cedric
 	Tefft <cedric@earthling.net>.
	
Mon Jul  6 17:24:20 1998  Mitch Davis <mjd@alphalink.com.au>

	* Makefile.in, ai/Makefile.in, client/Makefile.in,
 	common/Makefile.in, data/Makefile.in, server/Makefile.in:
 	Makefile.in files are normally generated from Makefile.am, but we
 	provide them for people who don't have automake.  In this case,
 	the Makefile.in files we were shipping did not support the
 	generation and checking of dependency information.  Reran automake
 	to regenerate them.  Done on the good advice of Falk Hueffner
 	<falk.hueffner@student.uni-tuebingen.de>.
	
Mon Jul  6 17:18:11 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/events.h, server/cityturn.c: Changed the spelling of
 	"aquaduct" to "aqueduct", as it should be.  Patch submitted by
 	Greg Wooledge <gawooledge@sherwin.com>.
	
Mon Jul  6 17:16:14 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/finddlg.c, client/gotodlg.c, client/repodlgs.c,
 	common/game.c, common/game.h, common/shared.c, common/shared.h:
 	This enhancement ensures that the city names in pick-a-city
 	dialogs are sorted.  Patch submitted by Cedric Tefft
 	<cedric@earthling.net>.
	
Mon Jul  6 17:10:38 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/game.c, common/unit.c, server/civserver.c,
 	server/gamehand.c: Did a #include <string.h> to prevent a warning
 	about implicit declaration of strlen and strcpy on the DEC Alpha.
  	Bug report submitted by ct <turnbull@xserver.sjc.ox.ac.uk>.
	
Mon Jul  6 17:07:00 1998  Mitch Davis <mjd@alphalink.com.au>

	* README, server/stdinhand.c: - Updated the Freeciv server
 	options.  Put in a key for the single-letter placeholders after
 	server commands which take arguments.  - Made mention of
 	"localhost" for a computer name when playing locally.  - Described
 	how to start an ai player (updated for 1.6.3).  Based on a patch
 	submitted by Carl Bartels <cb@bravo436.chem.mcgill.ca>.
	
Mon Jul  6 17:01:51 1998  Mitch Davis <mjd@alphalink.com.au>

	* data/helpdata.txt: Changed the order of some help items, moving
 	the general ones to the top.  Also, changed the "Freeciv" tag to
 	"About Freeciv".  Patch submitted by Sverker Wiberg
 	<sverkerw@Update.UU.SE>.
	
Mon Jul  6 06:42:31 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/game.c, common/game.h, common/map.h, server/civserver.c,
 	server/civserver.h, server/stdinhand.c: Cedric Tefft's patch to
 	create 'aifill' variable.  It originally sometimes crashed my
 	client when I was connected as an AI before game-start, but he
 	sent me a fix that seems to have worked. -- Syela
	
Sun Jul  5 23:57:25 1998  Mitch Davis <mjd@alphalink.com.au>

	* data/helpdata.txt: There are two lines which exceed the
 	68-character limit, and at least one grammatical mistake.  This
 	patch fixes all three problems.  Patch provided by Greg Wooledge
 	<gawooledge@sherwin.com>
	
Sun Jul  5 23:50:24 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/citydlg.c, client/dialogs.c, client/repodlgs.c,
 	server/unithand.c: - Replace the phrase "revenues account to" with
 	"revenues amount to".  - Replace "Treasure" with "Treasury".
  	Patch provided by Greg Wooledge <gawooledge@sherwin.com>.
	
Sun Jul  5 23:46:29 1998  Mitch Davis <mjd@alphalink.com.au>

	* client/mapview.c, common/shared.c, server/civserver.c,
 	server/sernet.c: Patch for OS/2, supplied by Alexander Mai
 	<st002279@HRZPUB.tu-darmstadt.de>.
	
Sun Jul  5 07:36:57 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unittools.h: Removed proto's of removed functs, added
 	proto's of added functs. -- Syela

Sun Jul  5 07:36:22 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unittools.c: Temporarily disabling
 	new_is_already_assigned and reverting to old.  The RIDICULOUS bug
 	regarding a unit on goto entering a tile where another settler
 	works was easily fixed in the old funct, and not easily fixed in
 	the new one.  This wasn't a problem until I made settlers on goto
 	stop and think every turn.
	
	Obliterated old random-looking ai_calc_* routines and wrote new
 	ones that follow the pattern set out in ai_eval_bu.  These
 	currently call city_tile_value which gives the right answers but
 	wastes a lot of CPU time.  I wanted to make sure it was right;
 	later I'll get around to making it efficient as well.
	
	Wrote road_bonus so that the AI blazes trails and doesn't just build
	randomly.  Rewrote in_city_radius to save CPU time.  -- Syela
	
Sun Jul  5 07:31:11 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Changing in_city_radius call since it's been
 	rewritten. -- Syela
	
Sun Jul  5 07:30:02 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.h: Changing auto_settler_findwork proto since it
 	now returns an int. -- Syela
	
Sun Jul  5 07:29:37 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Fixed the bug where settlers aboard
 	disappearing triremes crash the game.  Annihilated old autosettler
 	code.  Rewrote auto_settler_findwork and spent many hours testing
 	it, taking notes, and making changes.  It seems to be OK, so I'm
 	uploading it, but I wouldn't call it stable.  Weightings may need
 	to be changed.  The CPU usage is definitely unacceptable and I
 	will optimize this further but I need to upload it now.  Forcing
 	gotoing settlers to idle so they can re-evaluate their plans. -- Syela
	
Sun Jul  5 07:24:59 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/mapgen.c: Removed island_info from yet another module.
  	-- Syela
	
Sun Jul  5 07:24:23 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Wrote global_city_refresh, but didn't add any
 	calls to it yet. -- Syela
	
Sun Jul  5 07:23:32 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/citytools.h: Proto'd worst_worker_tile_value. -- Syela
	
Sun Jul  5 07:23:16 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/citytools.c: Made city_tile_value a little smarter about
 	foodneed and prodneed.  Added worst_worker_tile_value for
 	autosettler code. -- Syela
	
Sun Jul  5 07:21:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityhand.h: Defined FOOD_, SHIELD_, and
 	TRADE_WEIGHTING. -- Syela
	
Sun Jul  5 07:21:06 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityhand.c: Deleted ai_calculate_city_value comment, and
 	added a fnord in case I decide to use this model to save time.  I
 	really hate it and it cripples the AI badly but the CPU savings
 	may require it. -- Syela
	
Sun Jul  5 07:19:45 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/player.h: Removed ai_player_island.  Made comments about
 	removing race structs. -- Syela
	
Sun Jul  5 07:18:41 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/map.c: Map_adjusted x and y in map_set and
 	map_clear_special. -- Syela
	
Sun Jul  5 07:18:03 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.h: Defined MORT, and then kluged (in aiunit.c) so that
 	MORT is sort-of hardcoded.  This may be fixed once I figure out
 	how to get city_des exactly right with the least CPU effort.
  	Proto'd new functs. -- Syela
	
Sun Jul  5 07:15:38 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Removed lots of obsolete functions.  Wrote new
 	functions to replace them (relating to settlers).  Tidied up
 	findjob a little.  Forced caravans to idle every turn instead of
 	blindly gotoing cities that are no longer producing wonders.
  	Wrote amortize, which is very necessary for city_des, and is still
 	too slow but not as horrible as it was yesterday.  Generated
 	minimaps to include virtual city locations.  This is a
 	quick-n-dirty and may not last the week.  Spent days and days
 	working on city_des, which seems to be right with the current
 	value for the WAG at the bottom.  Forced settlers who are building
 	cities to remain in BUILD_CITY and others to be in AUTO_SETTLER
 	because the minimap checks it. -- Syela
	
Sun Jul  5 07:10:06 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aitools.h: Removed references to obliterated old, obsolete
 	AI. -- Syela
	
Sun Jul  5 07:09:22 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aitools.c: Removed all references to island_info!  Removed
 	ai_military_findtarget.  Fixed a typo in
 	ai_advisor_choose_building re: wonder placement. -- Syela
	
Sun Jul  5 07:07:37 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Removed elements of obsolete AI.  Removed
 	*_weighting arrays and used *_WEIGHTING defines. -- Syela
	
Sun Jul  5 07:06:42 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Removed remnants of obsolete AI. -- Syela
	
Sun Jul  5 07:06:06 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Changed maxcost to THRESHOLD * 6 + 2 to
 	facilitate new settler AI code.  Fixed a bug with illegal moves in
 	warmap when (punit). -- Syela
	
Sun Jul  5 07:03:45 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Adding more .h includes.  Fixing the quirk
 	where lux rate reduced building_wants.  Included taxmen in food
 	surplus estimates.  Removed *_weighting arrays to use *_WEIGHTING
 	defines.  Added quick-n-dirty fix to moderate lust for
 	marketplaces when tax rate jumps.  New, smarter want equations for
 	aqueducts and sewer system.  Corrected want for MFG.
	
	Obliterated old settler code, including expand_*.  Finding work
 	for a virtualunit to establish want for settlers.  This went
 	through a lot of trial and error and it seems to be working
 	acceptably now.
	
	Added SPY as yet another fallback until real diplomacy code is in.
 	-- Syela
	
Tue Jun 30 21:22:44 1998  Mitch Davis <mjd@alphalink.com.au>

	* ai/Makefile.am, ai/Makefile.in, client/Makefile.am,
 	client/Makefile.in, common/Makefile.am, common/Makefile.in,
 	server/Makefile.am, server/Makefile.in: This patch allows you to
 	build freeciv outside the source directory.  Submitted by Jason
 	Merrill <jason@yorick.cygnus.com>.
	
Sun Jun 28 08:32:40 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/helpdata.txt, server/citytools.c, common/city.c: Some
 	gameplay changes to be more like civ2.  Made some corrections in
 	the help file.
	
Thu Jun 25 09:37:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/plrhand.c: Removing a removed player's workers from
 	->worked. -- Syela
	
Thu Jun 25 07:56:04 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unitfunc.c: Patch from Falk Hueffner, bribed units light
 	up the terrain surrounding them.
	
Thu Jun 25 07:51:22 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityturn.c: Patch from Falk Hueffner, remove strange test
 	that kept settler production from being upgraded to engineers.
	
Thu Jun 25 07:42:47 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/climisc.c, client/helpdlg.c, client/menu.c,
 	client/repodlgs.c: Fixed warnings: missing #include's, unused
 	variable, bad printf.
	
Thu Jun 25 07:33:10 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityturn.c, server/unitfunc.c: Added the map_adjust_x/y
 	functions to the pollution code, to make sure it doesn't use bad
 	x/y coordinates.
	
Wed Jun 24 10:26:32 1998  Trent Piepho <xyzzy@u.washington.edu>

	* ai/aitech.c: Fixed crash related to deleted techs.
	
Wed Jun 24 08:15:47 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/cityhand.c, server/cityturn.c, server/civserver.c,
 	server/civserver.h, server/unittools.c, ai/aihand.h: More
 	header/prototypes fixing.
	
Wed Jun 24 08:01:38 1998  Trent Piepho <xyzzy@u.washington.edu>

	* ai/advdomestic.c, ai/advdomestic.h, ai/advmilitary.c,
 	ai/advmilitary.h, ai/aicity.c, ai/aicity.h, ai/aihand.c,
 	ai/aitech.c, ai/aitech.h, ai/aitools.h, ai/aiunit.c, ai/aiunit.h,
 	server/unitfunc.c, server/unitfunc.h: Added function prototypes to
 	lots of header files, and included header files where needed.
	
Tue Jun 23 13:19:39 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Fixing typo that makes kill_unit kill the
 	server.  Oops. -- Syela
	
Tue Jun 23 13:18:17 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Fixing act of complete idiocy on my part re:
 	defense techs -- Syela
	
Tue Jun 23 13:16:48 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Fixing bugs relating to huts in findvictim. -- Syela
	
Tue Jun 23 11:38:10 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Adding more geographic information to combat
 	messages in unit_versus_unit. -- Syela
	
Tue Jun 23 11:35:59 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unitfunc.c: Adding more geographic info to combat
 	messages in kill_unit. -- Syela
	
Tue Jun 23 11:32:32 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/plrhand.c: Moving calculate_tech_turns from here into
 	aihand.c where it belongs. -- Syela
	
Tue Jun 23 11:31:19 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/gotohand.c: Adding complexity to could_unit_move_to_tile
 	to handle ZOC issues midway through a goto.  Discouraging paths
 	that require attacks.  Warning when we do not find the shortest
 	path thanks to the above.  This module needs a total overhaul,
 	which I'll be performing this week. -- Syela
	
Tue Jun 23 11:25:57 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityturn.c: Discounting the city_tile_value of tiles
 	other cities can use in worker_loop.  Faking prodneed and foodneed
 	to better optimize worker placement until a time-consuming
 	dramatic rewrite is performed.  -- Syela
	
Tue Jun 23 11:21:37 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/citytools.c: A city that has bought a sewer or aqueduct
 	now wants_to_be_bigger. -- Syela
	
Tue Jun 23 11:19:10 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityhand.h: Prototyping really_handle_city_sell. -- Syela
	
Tue Jun 23 11:18:01 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/cityhand.c: Making handle_city_sell a frontend to new
 	really_handle_city_sell. -- Syela
	
Tue Jun 23 11:16:19 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/map.h: Changing move_cost from unsigned to signed
 	character. -- Syela
	
Tue Jun 23 11:14:37 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/map.c: Defining move_cost for ocean moves as -3 for the
 	new seamaps. -- Syela
	
Tue Jun 23 11:11:36 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/city.h: Adding wallvalue, downtown,
 	distance_to_wonder_city, and choice to ai_city struct, and
 	prototyping ai_choice because of it.  Also changing grave_danger
 	from a flag to a unit * -- Syela
	
Tue Jun 23 11:08:02 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Minor change to avoid redundant warmap generation.
  	Aborting ai_manage_explorer for non-ground units.  Treating cities
 	as impassable in exploration.  Aborting ai_manage_unit for units
 	with no moves_left.  More sophisticated formula for preference to
 	bash cities in unit_vul.  Better formulas for when units can
 	safely leave their home cities.  Adding ifs to handle sailing
 	units in find_something_to_kill. -- Syela
	
Tue Jun 23 10:11:14 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aitools.h: Adding ifndef around ai_choice proto because it's
 	now also in city.h -- Syela
	
Tue Jun 23 10:09:07 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aitools.c: Locating wonders much more intelligently with
 	downtown. -- Syela
	
Tue Jun 23 10:07:24 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aitech.c: Making nonreachable techs count as prerequisites.
  	Handling goals in ai_select_tech and adding a cache of prereqs to
 	facilitate it.  Deleting horrible old broken ai_select_tech_goal
 	and its subroutines now that working tech_goal code has been
 	established.  Obliterating failed attempt to over-optimize
 	tech_turns calculations and just calling tech_goal_turns once per
 	turn and in ai_next_tech_goal.  Handling goal in manage_tech.  -- Syela
	
Tue Jun 23 10:01:48 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aihand.c: Managing units twice, including at end of turn.
  	Calculating tech turns to save oodles of CPU time.  Changing
 	weightings for shields and food.  Fixing bugs that led to
 	excessive luxury for celebrations.  Fixing a goofup that led to
 	insufficient tax rate.  -- Syela
	
Tue Jun 23 09:57:21 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.h: Prototyping ai_choose_defender_* functions. -- Syela
	
Tue Jun 23 09:56:24 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aicity.c: Pulling some stuff out of
 	domestic_advisor_choose_build and moving it elsewhere.  Using
 	pcity->ai.choice to handle spend_gold in a separate routine.
  	Creating caravan map only as necessary to facilitate re-ordering
 	of events.  Adding utilities ai_city_defender_value and
 	try_to_sell_stuff.  Collecting spend_gold stuff in
 	ai_new_spend_gold with a lot of new intelligence added, including
 	disband and upgrade handling and willingness to buy attackers.
  	Restructuring ai_manage_cities and increasing desire for
 	government techs.  Dealing with boats in ai_choose_attacker.
  	Adding utility ai_choose_defender_versus.  Rewriting
 	ai_choose_defender_limited to handle boats for defense.  Not
 	selling citywalls anymore!  Allowing elvisization that creates
 	food deficit as long as there won't be famine. -- Syela
	
Tue Jun 23 09:42:29 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.h: Adding seacost to move_cost_map struct. -- Syela
	
Tue Jun 23 09:41:22 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Moving init_warmap into a separate routine.
  	Moving warmap generation into really_generate_warmap, with an
 	option to create maps for land or sea.  Shifting generate_warmap
 	into a higher-level function.  Changing assess_defense to a
 	higher-level routine with a new backend that can either
 	acknowledge or ignore walls.  Adding danger3 for coastal and
 	danger4 for sam in assess_danger.  Not being afraid of submarines,
 	and not being afraid of other ships if we are on land.  Being more
 	afraid of ships in walled coastal cities.  Including danger
 	adjustments if city has SAM or COASTAL.  Changing grave_danger to
 	a unit *.  Correcting firepower of defending ships to 1 in
 	unit_desirability.  Eliminating pathetic old military_advise_tech.
  	Adding process_defender_want and process_attacker_want to do this
 	job more intelligently.  Moving other attacker calculations into
 	kill_something_with.  Removing the danger -= def in
 	military_advisor_choose_build and therefore allowing defender
 	wants over 100.  Building COASTAL and SAM rather than piles of
 	useless defenders.  Minimizing desire for warriors as defenders.
  	Cleverly creating virtualunit for use in kill_something_with.
  	establish_city_distances for caravans. -- Syela
	
Tue Jun 23 09:23:52 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Removing warmap.  Using
 	distance_to_wonder_city instead.  Changing weightings of food and
 	shields.  Correcting wants for plants.  Moderating want for
 	granaries.  Making extreme desire for aqueduct/sewer during
 	celebrations require positive food_surplus.  Wanting barracks for
 	ground units only.  Adding wild guesses for COASTAL and SAM want.
  	Correcting typo regarding want for supermarkets.  Checking for
 	.researched in want for DARWIN.  Making caravan the default if we
 	can't think of anything useful to build. -- Syela
	
Sun Jun 21 07:47:19 1998  not sure

	* ChangeLog: *** empty log message ***
	
Sun Jun 21 07:45:42 1998  James Blackwell <innocent@merconline.com>

	* README: Modified the readme to update instrutions on AI play
	
Sat Jun 20 23:51:58 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/citytools.c: Fixing bugs in get_cathedral_power and
 	get_colosseum power.  Changing food_weighting and shield_weighting
 	in city_tile_value. -- Syela
	
Sat Jun 20 18:26:55 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/mapctrl.c: The orders menu wasn't getting updated when
 	the focus unit moved, so some choice would be inproperly
 	deactivated.
	
Fri Jun 19 23:46:26 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c, server/unitfunc.c: Fixing disappearing wonder
 	bug.  Adding get_virtual_defense_power. -- Syela
	
Fri Jun 19 22:31:33 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/clinet.c, client/clinet.h, client/menu.c: Adding
 	disconnect option to Game menu. -- Syela
	
Fri Jun 19 22:25:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* client/messagewin.c, client/packhand.c, common/shared.h,
 	server/plrhand.c, server/plrhand.h: Committing Cedric's patch to
 	allow explicitly requested dialogs to popup even in AI mode with
 	popup_windows disabled. -- Syela
	
Fri Jun 19 09:56:12 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/Freeciv, client/Freeciv.h, client/civclient.c,
 	client/mapctrl.c, client/optiondlg.c: Added new option to client,
 	default ON, to auto center on the active unit, either when the
 	unit gets focus or when it moves.  This is the same as the
 	previous behavior, so really the new feature is the ability to
 	turn this off.
	
Fri Jun 19 02:24:58 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/civclient.c: The manual turn done stuff is now done in
 	the client.  The client will send a "turn done" packet at the
 	start of the turn if it is AI controlled and the AI_MTD option
 	isn't on.
	
Fri Jun 19 02:21:09 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/stdinhand.c, client/plrdlg.c: AI controlled players get a
 	"*" in front of their names in the player dialog.
	
Fri Jun 19 01:59:34 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/mapview.c, client/optiondlg.c, client/packhand.c,
 	client/xmain.c: The manual turn done stuff is now done in the
 	client.  The client will send a "turn done" packet at the start of
 	the turn if it is AI controlled and the AI_MTD option isn't on.
	
Fri Jun 19 01:57:14 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/stdinhand.c: AI players create with the "create" command
 	showed up as connected when they weren't.  Set
 	pplayer->is_connected to 0
	
Fri Jun 19 00:40:41 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/packets.c: Removed the manual turn done stuff from the
 	protocol.  Made the client/server backward compatible.
	
Fri Jun 19 00:35:07 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/packets.h: Adding in ai control to player info packet,
 	but NOT manual turn done stuff.
	
Fri Jun 19 00:22:59 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/plrhand.c: Undid previous manual turn done stuff, but
 	added in ai control information to player info packet.
	
Thu Jun 18 18:32:06 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/packets.c: Server will no longer get wedged when it
 	receives an unknown packet type.  It will remove the packet from
 	the queue and ignore it.
	
Wed Jun 17 20:20:34 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, client/civclient.c, client/mapview.c,
 	client/messagewin.c, client/optiondlg.c, client/packhand.c,
 	common/packets.c, data/Freeciv, server/plrhand.h,
 	server/stdinhand.c: Patches from Cedric Tefft
 	<cedric@earthling.net>, with some of my own changes.  New options
 	in the client, one to turn off popup dialogs when AI controlled.
  	Another to have AI controled players not need to manually activate
 	turn done.
	
Wed Jun 17 19:17:30 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/stdinhand.c: Fixed spelling error, Affect -> Effect
	
Tue Jun 16 18:10:18 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/unit.c: Added locations for pictures of missing units.
	
Mon Jun 15 23:45:48 1998  Mitch Davis <mjd@alphalink.com.au>

	* Imakefile: Removed extraneous trailing \.  Bug reported by Dylan
 	Thurston <dpt@math.berkeley.edu>
	
Mon Jun 15 21:58:54 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/helpdata.txt: Changed to reflect Artillery now longer
 	ignoring city walls.
	
Mon Jun 15 20:58:43 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/helpdlg.c: The help system should no longer segfault when
 	trying to display the tech tree for a tech that has been removed.
	
Mon Jun 15 20:41:07 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/plrhand.c: Spelling error, report -> Report
	
Mon Jun 15 20:38:06 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/dialogs.c: Patch from Cedric Tefft <cedric@earthling.net>
 	The bribe and revolt diplomat options will have the correct title
 	on their respective dialogs.
	
Mon Jun 15 20:35:07 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/Freeciv.h, data/Freeciv: Applied Cedric Tefft's
 	<cedric@earthling.net> patch to add titles to most of the
 	transient windows.
	
Mon Jun 15 20:03:28 1998  Trent Piepho <xyzzy@u.washington.edu>

	* data/helpdata.txt: Added help text for Barracks II and Barracks
 	III.
	
Mon Jun 15 19:52:18 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/xmain.c: Client will no longer crash when the resources
 	don't define the version.  There seemed to be lots of people with
 	version 1.0 resources that had trouble with seg faults because of
 	this.
	
Mon Jun 15 19:44:13 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/repodlgs.c: Added Seth Golub's <seth@thehouse.org> patch
 	to show celebrating cities in the City Report.
	
Mon Jun 15 19:32:51 1998  Trent Piepho <xyzzy@u.washington.edu>

	* server/unittools.c: Submarines can't attack land at all anymore.
  	Before they could if they were in a city.
	
Sat Jun 13 21:12:49 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Making sure pdiplomat is non-NULL in
 	handle_diplomat_action. -- Syela
	
Tue Jun  9 16:15:41 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/mapctrl.c: When a unit gets focus, the crosshair tile
 	will flash on it to let you know.
	
Tue Jun  9 16:10:09 1998  Trent Piepho <xyzzy@u.washington.edu>

	* client/mapctrl.c: The client will find the next unit to focus on
 	better.  Before it would pick the lowest numbered unit if the one
 	that had focus no longer exists.  Now it will pick the one closest
 	to the center of the map.
	
Mon Jun  8 21:19:47 GMT 1998  Mitch Davis <mjd@alphalink.com.au>

	* Released 1.6.3.

Mon Jun  8 21:15:47 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Preventing a division by zero for AI military units
 	with attack=0. -- Syela
	
Mon Jun  8 18:49:46 GMT 1998  Mitch Davis <mjd@alphalink.com.au>

	* server/unithand.c: Removed a pernicious line added by Olav
 	Andree Brevik <olavb@ifi.uio.no>.  A city should act as if it's
 	square is irrigated, but the square should not actually _be_
 	irrigated, otherwise Bad Things Happen, like then the city can be
 	used as a source for more irrigation.  He'll provide a more
 	complete patch in the fulness of time.

Mon Jun  8 18:19:47 GMT 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/unit.c, server/unitfunc.c: A fix so pillage also un-mines
 	mines.  Bug reported and patch supplied by Olav Andree Brevik
 	<olavb@ifi.uio.no>

Mon Jun  8 15:41:00 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Making explorers smarter again.

Mon Jun  8 14:51:59 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unittools.c: Making rate_unit a little less crude.

Mon Jun  8 12:28:57 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* server/unithand.c: Calling pnewcity instead of pcity after pcity
 	has been freed in handle_unit_enter_city; very important, should
 	have been found earlier.

Mon Jun  8 12:01:54 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Real fix to explorer problem; had carelessly pasted
 	in bad code block.

Mon Jun  8 11:21:39 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aitech.c: Kluging so AI won't switch away from a tech it's
 	about to get.
	
Mon Jun  8 11:20:32 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c: Fixing brain-damage in ai_manage_explorer +
 	important rescale of danger.

Mon Jun  8 11:19:04 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advmilitary.c: Not increasing want for B_CITY because of
 	IGWALL/flying units.

Mon Jun  8 11:18:09 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/advdomestic.c: Tempering AI's desire for Hoover Dam.

Mon Jun  8 07:13:19 GMT 1998  Trent Piepho <xyzzy@u.washington.edu>

	* configure, configure.in: Changed configure.in so it checked for
 	X11/xpm.h instead of xpm.h, since that's how the file is included.
  	Also removed cruft that was from when xpm.h was included wrong.

Mon Jun  8 07:09:36 GMT 1998  Trent Piepho <xyzzy@u.washington.edu>

	* common/unit.c, common/unit.h: Changed unit stats to match civ2.
  	Biggest change was knight's HP reduce to 10 from 20.

Mon Jun  8 00:07:53 PDT 1998  Trent Piepho <xyzzy@u.washington.edu>
        
        Changed unit stats to match civ2.  Biggest change was knights HP
 	reduce to 10 from 20.

Sun Jun  7 16:32:33 GMT 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/shared.h: Oops, forgot to increment the version number
 	for 1.6.2.  Reported by Nuno <slug@student.dee.uc.pt>.

Sun Jun  7 15:45:58 GMT 1998  Mitch Davis <mjd@alphalink.com.au>

	* common/Makefile.am, common/Makefile.in, common/mapgen.c,
 	server/mapgen.c: Oops, we had two copies of mapgen.c, one in
 	common/ and one in server/.  Since it's only used by the server, I
 	deleted the one in common/.  This bug reported by
 	schaefer@malaga.math.uni-augsburg.de (Peter Schaefer)

Sat Jun  6 19:19:53 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* common/map.h: On some machines, "char" is unsigned, whereas we
 	were expecting it to be signed.  Explicitly defined "worked" as
 	signed to avoid this happening again.

Sat Jun  6 17:52:05 GMT 1998  John Stonebraker <ppaqebb@surfshop.net>

	* ai/aiunit.c, ai/advmilitary.c: Rescaling danger by a factor of
 	900:1 to stop overflows in assess_danger.

Sat Jun  6 13:52:34 EST 1998  Mitch Davis  <mjd@alphalink.com.au>

	Released 1.6.2.

Sat Jun  6 13:50:43 EST 1998  Mitch Davis  <mjd@alphalink.com.au>

	* ai/aihand.c: Removed a comment left over from 1.5.1.

Sat Jun  6 13:44:59 EST 1998  Mitch Davis  <mjd@alphalink.com.au>

	* NEWS, ChangeLog, configure, configure.in, client/Freeciv.h,
	common/shared.h, data/Freeciv: Updated version numbers to 1.6.2.

Fri Jun  5 21:36:21 ??? 1998  Trent Piepho  <xyzzy@u.washington.edu>
	
	* client/mapview.c: Added Markus L. Noga's
 	<ut6e@rz.uni-karlsruhe.de> patch so cities are drawn correctly
 	with transparent flags.

Fri Jun  5 21:33:55 ??? 1998  Trent Piepho  <xyzzy@u.washington.edu>
	
	* client/mapctrl.c: Fix for minor bug in crosshairs display.

Sat Jun  6 03:23:07 EST 1998  Mitch Davis  <mjd@alphalink.com.au>

	* Makefile.in, aclocal.m4: Updated generated autoconf files to the
 	ones generated by autoconf 1.3.

	* configure, configure.in: Rearranged order to check X libs; the
 	incorrect link order was causing the client to not be able to gain
 	focus or read the keyboard.
	
1.6.1 (mjd)
- Moved the CHANGES file to ChangeLog, to comply with the GNU standard.
- Updated many version numbers to 1.6.
- Added the CREDITS file to the list of files to go into the .tar.gz.
- Updated the web page to http://freeciv.ultraviolet.org
- Made the civ and ser scripts smarter: They now look in two dirs for
  the exes to run.
- Removed a whole lot of autogenerated files which should not have been
  checked into 1.6.0.  This is what caused compilation and library
  problems for MANY people who tried 1.6.0.

1.6.0 
- *A LOT* of changes from Olav Andree Brevik. Thank you VERY much!
- Helicoptors loose 10% of hp per turn when outside city (Olav)
- 8 bit chatline support for Europeans (Olav)
- Non-ground units in cities regain hp too. (Olav)
- Flying units report moves left (Olav)
- Total moves in change production menu (Olav)
- Railroads now built into city tiles, even when taking a city from an
  inferior race. (Olav)
- Future Technologies added. Add 5 points to score (Olav) 
- Autoconf added thanks to Falk Hueffner. Now we can configure just like
  the big boys!
- Tax/Luxury/Science rates are now visually displayed. needs work still.
  thanks to Peter Schaefer
- Instead of picking individual techs, players can now set a tech goal, and
  let the actual patch to discovery be automated.
- Fix to Makefile.noimake
- Client option to display tiles sets with transparent flags better
- Granary counter in the city dialog wasn't the right size when foodbox!=10
- Fixes to city dialog so different sized tiles will work
- The connect dialog will pop-up when the connection is lost before the
  game starts
- Pop-up windows weren't getting freed in the client, resulting is large
  resource leak
- Memory leak fixed in select units pop-up, pixmaps weren't getting freed
- Fixed hardcoded tile size in select units pop-up
- Reorganized tile layout in the XPM files.  Client can handle different sized
  tile sets.
- A "+" is drawn in the corner of enemy unit stacks
- Crosshair placed on goto destination when unit is inspected with the
  middle mouse button.  Change to protocol to send goto destination.
- Fixed bug in the selection of the hitpoint bar
- Map canvas had hard coded size, fixed to be correct for different sized tiles
- Fixed bug that messed up game.global_advances when a saved game was loaded
- Fix to make goto code use the same movement cost as the rest of the server
- Invisible AI city bug fixed.  Cities created or captured by an AI player
  would disappear from other people's maps.
- Added -s option to server, lets you explicity set hostname metaserver reports
- Fix typo in metaserver code, PRE_GAME_STATE instead of CLIENT_PRE_GAME_STATE
- Fixed bugs with partisan creation, make it faster too
- Submarines can no longer attack land based tiles. Thanks Peter Schaeffer!
- Improved AI, reduced CPU usage, and more (Syela) :

-- Changes that matter to regular players:
  
  Allowed non-AI players to set tech goals (goal label, goal widget,
   PACKET_PLAYER_TECH_GOAL, pinfo->tech_goal)
  Added food supply to city dialog and recentered dialog header
  Added 'Export log' option to the Game menu (log_output_window)
  Included Darren Smith's patch ('create' command) and changed ai_select_race to
   be random unless names matched (Napoleon chooses French, Joe chooses randomly)
  Properly initialized the void_tile for map_get_tile with y out of bounds
  Changed some implementations of map_distance to real_map_distance
  Added more goals to the races[], then almost obsoleted them with tech AI
  Set did_buy to -1 in create_city to allow "Can't buy in new cities" message
  Displaced the worker already on a tile where a city was created
  Fixed a typo in happy_lux that devalued lux in cities with unhappy people
  Fixed some typoes involving race_name_plural
  Made sure goto started with a zoc-ok, non-attack move
  Fixed a typo so triremes have a 50% chance of disappearing (instead of 49%)
  Map_adjusted x in create_unit
  Made attack messages more detailed
  Made first tech a choose_goal_tech (big deal)
  Made ai_advisor_choose_building the default in advisor_choose_build
  Placed the displaced workers that used to become entertainers
  Changed the turn sequence from auto_settlers, sniff_packets, end_turn to
    shuffle_players, ai_start_turn, auto_settlers, sniff_packets, end_turn
  
  Wrote most of an AI ...
  
-- Changes related to reducing CPU usage by slightly increasing memory usage:
  
  Wrote init_move_costs, reset_move_costs, city_shield_bonus, city_tax_bonus,
   city_science_bonus, set_city_shield_bonus, set_city_tax_bonus,
   set_city_science_bonus, assign_settlers_player, assign_settlers
  Added shield_bonus, tax_bonus, science_bonus to city struct
  Added worked, assigned, move_cost to tile and implemented them
  Obsoleted old is_already_assigned, is_worked_here
  
-- Changes that matter to code-hackers
  
  Moved ai_do_last_activities to the TOP of update_player_activities
  Moved update_city_activities above update_tech so got_tech works now
  Used set_worker_city instead of workarounds so ->worked worked
  Used set_unit_activity instead of workarounds so ->assigned worked
  Commented out some redundant checks in old auto_settler functs
  Returned something useful in building_other_wonder
  Made snide comments all over the code
  Split up ai_manage_city, ai_do_activities, can_build_improvement,
   handle_city_buy, set_trade_prod, add_buildings_effect
  Wrote real_map_distance, sq_map_distance, could_build_improvement,
   shuffle_players, could_unit_move_to_tile, really_handle_city_buy
  
-- Some behind the scenes elements of the AI
  
  Wrote advdomestic.c, advmilitary.c, ai_manage_buildings,
   ai_city_choose_build, ai_choose_attacker,  unit_attack_desirability,
   ai_choose_defender_limited, many utilities in aitech.c, ai_select_tech,
   ai_manage_tech, ai_advisor_choose_building, ai_manage_explorer,
   should_unit_change_homecity, unit_belligerence, unit_vulnerability,
   reinforcements_value, ai_military_findvictim, ai_military_gothere,
   unit_defensiveness, find_something_to_kill, probably more in ai/*.c,
   city_tile_value, better_tile, wants_to_be_bigger, probably more.
  Obsoleted old ai_city_choose_build, ai_spend_gold, best_tile, best_food_tile
  Rewrote worst_elvis_tile, ai_find_elvis_pos, ai_make_elvis,
    make_scientists_taxmen, ai_manage_taxes, ai_manage_government,
    auto_settler_findwork
  
  Updated somewhat the comments in aihand.c to show what I'd done
  Started ai_manage_city with a city_check_workers
  Hacked ai_next_tech_goal to use my (not-yet-ready) ai_select_tech_goal
  Correctly calculated agression in findtarget so pikemen don't attack
   and legions on mountains do
  Returned maxbuycost in ai_gold_reserve if the AI really needs money
  Worked around savegame/cityspot bug but island_data will be obsolete soon
  Forced military units idle at top and bottom of ai_manage_military
  Forced military units to fortify if possible at bottom of ai_manage_military
  Reset the ai_roles for military units every turn to prevent tunnel-vision
  Added AIUNIT_EXPLORE for units to explore
  Added building_want, danger, trade_want, grave_danger to city AI
  Added maxbuycost, tech_want, tech_turns to player ai
  Fixed ai_military_findjob so that the right unit defends cities and others don't
   and to allow military units to explore (find huts, map-discover, etc.)
  Fixed ai_military_attack to use my AI
  Made the AI not place workers that would be unhappy
  Aborted goto for AI units instead of attacking without using AI attack functs
  Forced asess_danger for ai players and civ_score on game load
  Lit all squares in city radius when the AI conquers a city
  Hijacked content[0] for my AI (building_want needs it)
  Wrote the worker_loop and added prodneed to it
  Forced ai_next_tech_goal in update_tech for AI
  
1.5.4 
- Small, very basic ai has been included. It needs a lot of work. Any
volunteers? 

1.5.3
- Highlevel genlist iterators for unitlist and citylist iterating
  has been introduced. 
- The include/ directory has been removed. The include files has been
  put into the corresponding common/ server/ client/ dirs.
- Some server files has been split into smaller modules.
- Freeciv Hacker's Guide included.
- Last references to the old Militia unit removed from the help.

1.5.2
- Mitch did alot for this release:
-   Added support for none 30x30 sized tiles.
-   Removed a bunch of warnings
-   Went through the helpdata.tx file and corrected and added alot
-   Fixed a nasty spell-bug: goverment -> government
-   Much much more
- Jan Echternach fixed a bug in the worker placement code
- AI code has been better structured.  
- Some bugs related with the helpbrowser fixed
- Some visual improvements here and there

1.5.1
- The resource file is now version checked
- Fixed bug with long names
- There will be no netscape unit,and the explorer can't be uninstalled!(sue me)
- After loading a game, partisans would only be given to the player with the
  lowest index. Keep the fixes and bug reports coming
  Due to a missing entry in the save file as Rajala Ilkka reported
  and provided a patch for.
- Sorry but due to a missing entry in the save file as Rajala Ilkka reported
  and provided a patch for.
  After loading a game, partisans would only be given to the player with the
  lowest index.
- There was another wrap bug, which resulted in buggy worker assignment.
- Worked alot on the AI, still it plays like a child.
- The AI work has resulted in a better automatic build algorithm, there
  is alot of work to here still.
1.5.0
- removed some of the micromanagement, extra prod points are transfered
  to the next build.
- Fixed the help texts, now someone needs to fix my grammar..
- Added zoc message as people doesn't understand the rules.
- ai server command, to toggle AI on a player. Now we just need the AI code.
- AI value added to the saveformat, so new minor level is required
  Don't think it's doing anything yet...
- automatic worker allocation scheme has been modified further, cities less
  than size 4 will go for citygrowth, now prefer 210 tiles over 102. 
- new help dialog
- nuke tiles moved. auto tile added.

1.4.6

- Hohensee's pointed out that Beatles sings 'You say you wanna revolution'
- fixed bug with players joined a loaded game with the same name
- autostart when #players==maxplayers after loading
- New server connection dialog
- Now foodbox just have to be full, not overfull to increase city size
- Massimo Campostrini, sent a patch fixing bug with missing gameinfo
- Alpine troops, and explorers now benefits from railroads
- initial steps to AI has been made. 
- turns taken to perform irrigation and mining  has been altered.
- Airborne units can now goto from one continent to another
- Fixed 2 bugs in autosettlers, 1. they could crash the server, 2. they now 
  start immediately on their tasks.
- man pages included to please the Debian rules
- Michael Hohensee wrote a very nice HOWTOPLAY text
- Richard Braakman fixes bug related to detecting savefile error
- Removed all warnings reported by gcc -Wall
- Rewrote sniff_packets() main loop to periodically send reports
  to the meta-server.
- New 'meta' server command.

1.4.5
- the subject list box in the help-dialog is now properly updated
  when an item is selected
- renumber player updated
- subs updated - hate them forever

1.4.4
- Players nolonger starts on top of huts - Mitch
- Spy's now work, and a major bug in diplomacy has been fixed.
- modified settler assignment a bit, weights production a bit higher now.
- Yet more cosmetic changes by Mitch
- Nuke bug spotted by James Blackwell

1.4.3
- Mitch Davis send us 4 patches, which fixes quite a few spelling
  mistakes and alot of sourcecode improvements and some Makefile
  fixes.
  Fixed Submarines, can now carry 8 missiles
  Carriers and subs can't carry ground units anymore, still were a bug

1.4.2
- fixed bug with colliding global vars
- fixed bug with missing char, when server vars was set

1.4.1
- fixed bug in load code
- initial metaserver support added

1.4.0
- when players looses connection before the game is started,
  they're removed from the game.
- correct end of turn when the last player cuts link
- remove player command added to server
- goto algorithm has been improved thanks to Rene Schalburg
- new random generator, hope things now are more random.
- submarines now works...
- Engineers works as double speed settlers, can't do organizing
- submarines are now invisible
- airlifts and city goto implemented, shortcut is 'l'
- Carriers can only carry planes and missiles now.
- Marine flag added, to add support for amphibious attack
- ground/air unit capability added (helicopter) 
  Helicopters can take cities etc.. and don't need to refuel.
  allthough they will loose 1 hp per round out of city.
- Aegis cruisers got double defense against attack from airborne units.
- leonardo's workshop will now only work if you actually got the damn thing. 
- totally redesigned help pages.
- The remaining units has been added.. 
1.3.1
- Lighthouse now let you produce veteran sea units aswell.
- Got a new neat compiler, that could give more intelligent warnings.
  removed alot of unnecessary variables.
- Added a modified version of leonardo's workshop, (invention)
  will upgrade 1 unit/round, will remove veteranstatus.
- altered the autoplace worker algorithm yet again, now i think it
  works decently (well atleast it suits my playstile)
- veteran status wasn't updated on the client side.
- upgrade units in active units dialog. allows you to upgrade your old out of
  date units, that is in a city square to a new and more modern version.
  will cost you some gold tho.. the side effect of this is leonardo's workshop
  which i'm still not sure if i want to incorporate or not.
- u for unload ship
- 'all' button on the wake up units
- Found one of the ancient gigantic bugs, and a fix for it 
  as it was, units didn't get a homecity on the server before the game was
  saved and reloaded, now this will help alot for the game balance. 
- Peter Skov fixed the problem with saving before game has started in a neat
  way by saving the settings instead of a game, this means you can make your
  favorite settings then save them to a file which you can use later on.
  with the -f server switch. 
- can't change all the map dependent options after the game has started.. 
- fixed a little problem with the help button on the science dialog.
- removed a bug that had sneaked into the support of units calculations.
- compiled it with some strict options and found a few minor bugs..
- added a civ1-2 switch but it doesn't do anything yet. need a voluenteer
  to do the civ1 tech tree and unit-building dependencies.
- The unit values  and the techtree has been checked and has been adjusted 
  according to civ 2.42 rules.

1.3.0
- Peter Skov added the following client features & server fixes
    * help in the city dialog on the units/buildings you can build.
    * a help toggle in the science dialog, if you turn it on, you won't change
      techs, rather it will show the help for this tech.
    * buy and change buttons in the city report, eases the pain of managing 
      your cities. 
    * there had sneaked a bug into top-5 cities, which has also been fixed

- port facility added, if naval unit is build in city with port facility
  unit will be veteran, repairment of a ship in a city with port facility
  only takes 1 turn
- Airport added on server, need to do a client command to activate them
  airborne units will be fully repaired in a city with a airport in 1 turn
  and will initially be veteran if build in a city with airport 
- new techs added radio, machine tools, amphibious warfare
- Shuffles players randomly at new turn, so the first player that connected
  doesn't get the wonder when 2 people are building the same wonder in the
  same round. 

1.2.0
- Extra fast unit info when middle clicking on an unit on the map 
  (attack, defense, firepower)
- Fortresses wasn't saved correctly in the save file.
- Cities are now properly refreshed at end of turn.
- can't buy units when cities are in disorder anymore.
- buildings unnecessary due to wonders like the granaries to pyramids, don't
  show on the build list anymore, if you have an unnecessary building already
  it will be marked with (*)
- autobuild  needed serious fixing, is better now. Still not ideal 
- Made a new mapgenerator, that works on minimum 80x50 maps
  which will make 7 equal sized islands. Still alot of fiddling to do with
  it but it should make things alot more fair.
  So set generator 2 to try the new map generator.
  And keep the number of players below 8....
- changed the "auto choose place to put worker algorithm" a bit now it
  favors huge amounts of trade and production over food.

1.1.6 (never released)
- SDI now give double defense against missile attacks, thats a 
  multiplier by 4 together with SAM batteries..
- SAM batteries added. Double defense against aircrafts
- supermarkets added. 50% food bonus on irrigated tiles
- Hoover dam can now be build, an and should have been an or :)
- Fixed problem with king richards crusade.
- Fixed problem with cruise missiles.
- Fixed problem with martial law under communism and monarchy 
- Fixed problem with wonders not seemingly working first turn after reload
- think i fixed the change tech stuff, now it's not reset on the client
  if you change tech in the round you get one.. Maybe..

1.1.5 (never released (except for 2 persons))
- the city growth can now be adjusted with the foodbox server option
  used instead of the standard 10 multiplier of citysize to determine when
  a city will grow
- number of buildings that will be razed if you conquer or loose a city is
  now a game variable, namely razechance. Palaces will always be destroyed..
- oops fortresses beneath cities gave 100% defense bonus. don't anymore
  units in cities and fortresses always count as fortified.
  coastal fortresses is needed to protect cities, a citywall just won't do
  it anymore. same count for bombers, but there is no defense against them.
  since SAM site haven't been made yet. 
- Hanging gardens converts content to happy if possible, other wonders
  converts unhappy to content.
- Caught in city, a ship used to have 1 in defense, now it has its usual 
  defense, but only 1 in firepower instead.
- Changed the messages when a unit(s) dies. (tells which city if on a city 
  square and what units died always)
- Found some crash bugs while debugging, goto could kill server if unit died 
  while gotoing. (my settler did a goto into a hut with barbarians)
- Changed obsolete tech test, to unit testing in the unit list.
  makes things easier, and more readable.
- remaining units, techs, buildings has been added, but looped..
  just to make sure future savefiles will be consistent, if we want to have 
  them in the game.
1.1.4 (beta tested by 4-5 persons)
- new flags:
  igwall    ignore citywalls, counts for artillery, 
  generates extra unhappy under  republic and democracy (as it has always been)
- happy/content/unhappy fixed according to civ2 rules, be careful out there,
  it's harder now to keep cities happy. 
  (took me a bloody sunday to figure how the exact formula works) 
- cruiser missiles was to cheap, costs 60 now instead of 40, 
  and their firepower is now 3, reduced its hp to 10.
- armor had firepower 2, fixed.
- carriers only 9 defense now, 2 firepower 40 hp's instead.

- got rid of year 0. A nasty hack was needed , but we were getting too many
  reports about it.

- percent penalty instead of 0 when changing tech default 100 
- foodbox server option default 10
- fixed a few bugs in mapgen.c (landmass and swamp is now used)

  o settlers costs 2 food under communism now.
  o cities did loose size by naval or air bombardements, doesn't anymore.

o cities did loose size by naval or air bombardements, doesn't anymore.
  o can only build fortresses after invention of construction
  o can't fortify naval or airborne units anymore.
  o happiness calculations was buggy, among other things colloseums gives
    +4 instead of +3 after development of electricty.
    the luxury and wonder happy calculations has been modified a bit..
  o cities only give a 50% bonus on defense, city walls still give a 200% bonus
    and since they don't cost much in maintainance. Go Build them.
  o movement changes:
    - unit move rates, scaled by lost hp's. allthough land based units have 
      atleast 1 move, naval units 2, and air units isn't affected
    - moves and fuel wasn't in the savefiles, they are now.
    - discover nuclear power and get + 1 move for naval units.

  o getting a city in a goody hut didn't add a road beneath the city.

o ver 1.0k - August 10
  o server freeze bug fixed thanks to Stefan Andersson.
  o various other bugs fixed too.

o ver 1.0j - Apr 8 
  o Pillage could be done by settlers only. This isn't correct, actually should
    be doable by all land based units, except settlers, caravans & diplomats..
  o Now units with 0 attack/defence power will ALWAYS loose in battle.
  o Reported By Andrew Donkin and patches aswell :).
    - Could make unlimited # of trade routes... Fixed 
    - Units gained hp by building fortresses not when fortified .... Fixed  
  o Problem with nukes, could nuke the server :). 
    Fixed (well not first time i said that) 
    (Reported By Christian Bricart).
  o Problems with list of available tech after getting techs one way or 
    another is hopefully fixed. (noone has been cheated, tech was correct, 
    but the researchable list was not updated.)
  o Tried to fix rolling thunder tactics. new server option cityfactor which
    modify the unhappysize this way: 
    newunhappysize = unhappysize - #cities/(cityfactor - (5-goverment))
    eg. under monarchy with 25 cities, unhappysize 5, cityfactor 14  
    you'll have a newunhappysize of 5 - 25/(14-(5-2)) = 3 ...
    that is lots of cities and low goverment forms, will give unhappiness. 
  o Diplomat treaties are unbalancing the game. Now you have a new variable 
    that can reduce the effect of tech-trading, techcost. Whenever you get a 
    free tech  it'll cost you techcost percent of a normal research cost, 
    to incorporate  it in your society. Standard this variable is 25%. 
    Setting it to 0 will  give you the standard behaviour. So don't look 
    startled if you suddenly have a negative number of tech bulbs.   
  o Tax-Trade-Luxury calculation tended to favor Tax when distributing. Fixed..
  o Goodie huts changed a bit: 
    - different units in huts depending on tech level.
    - no barbarians if hut is in city radius.
    - advanced tribes added.
  o Seperate Popup windows added (see the Game menu (Mes Options)), more to
    be added later.
  o Message Window added, with goto location button.  
  o fixed minor textual details
    (eg.when someone you have contact with gains tech)
  o autosettlers added, use this option at your own risk..
    Press A to activate them.
  o New server option cavalry, allows players to start with a number of 
    cavalry.
  o Game will not start before Minplayers has connected. 
  o buffed lighthouse, now owner will not loose triremes at sea. 
  o Diplomats will now be able to defend cities, against other diplomats.
  o Rivers only costs 1/3 movepoint to travel on.
  o Altered the startposition algorithm, should even out things abit.
    A side effect of this lets small maps eg 40x25 work, server used to loop..
    (well atleast for a reasonable amount of players)
o ver 1.0h - feb 16
  Massimo Campostrini once again supplied us with historical correct
  citynames - this time for the Aztecs.
  Proper error message when the xpm files can't be opened.
  Panner widget allow resizing of chat window.
  A huge pile of bugs, reported to us by Goswin Brederlow, has been
  fixed.
  Pedantic detail: Default setting of game-save interval was 1. 
  Correct value is 10.
  Notification added when player with whom you have an embassy invents 
  something. 
  Game will end if only one player is alive.
  Announcement of building wonders now include which city that builds it.
  Notifies attacker if his attack was succesful or not
  resets light bulbs at end of turn if player gets a tech. 
  Check every turn if units on ocean has transporters enough.
  If wonder was autobuild it wouldn't be announced. (fixed)
  Bug in mapgen.c fixed, start positions could be real close.
  Added a steal flag to the city structure, can only be stolen once from
  every city now, restarts if the city has been conquered. Don't know if this
  is correct..
  Trade Routes are now modified according to the continental rules.
  (both cities on same continents halfes the output).
  Hoover dam and Michelangelo's Chapel only affects the continent
  on which they have been built.
  Gaining a free tech in huts worked before but gave a wrong message, 
  this has been fixed aswell.
  Fixed bug located by Robert Wilton, in unit_activity_text()
  Fixed zone of control bug, now you can always enter and leave a city.
  saved alot of cycles in goto, no affect on game play. 

o ver 1.0f - jan 26
  The X resource leak fixed. Citynames initial go. Now handling the
  wm_delete_window event.
  Ouch that genlist fix in 1.0e made another bug visible in the
  transporter code. Stephan Boettcher patched that and fixed bug
  with carriers not carrying planes.

o ver 1.0e - jan 26
  Applied patches submited by Massimo Campostrini, concerning citynames
  and diplomat action messages.
  Fixed nasty leak in the pixcomm widget. Fixed leak in genlist's 
  unlink().

o ver 1.0d - jan 19
  Applied patches submitted by Hans Petter Bieker, to fix bugs in
  clinet.c and unithand.c.
  Included spanish translation of the help-file - submitted by 
  Anselmo Perez Serrada.
  The city-report now contains some more data.
  The main info widget is now clickable, to produce a small
  popup, containing some more info.

o ver 1.0c - jan 12
  Fixed bug in citydialog introduced in 1.0b. Made the code handling the
  overview map much more efficient. Let X parse command line options.
  Hopefully fixed problem with viewport widget's width in the diplomacy
  dialog on some setups.

o ver 1.0b - jan 11
  Fixed problem with Pixcomm widget, which caused the city dialog
  to crash on some setups.

o ver 1.0a - jan 8
  Applied large patch by Warwick Allison - fixing many spelling mistakes 
  and lots of other stuff. Fixed problem with units not showing up in the 
  left bar. Fixed bug with cities with size 0. 

o ver 1.0  - jan  5 - 1996
  first release
  

